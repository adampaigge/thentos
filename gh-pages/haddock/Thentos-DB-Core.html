<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Thentos.DB.Core</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Thentos-DB-Core.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">thentos-0.0.1: Privacy-preserving identity management on the web</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Thentos.DB.Core</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span> <a href="#t:ThentosClearance">ThentosClearance</a> = <a href="#v:ThentosClearance">ThentosClearance</a> {<ul class="subs"><li><a href="#v:fromThentosClearance">fromThentosClearance</a> :: DCLabel</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:ThentosUpdate">ThentosUpdate</a> a = <a href="Thentos-DB-Core.html#t:ThentosUpdate-39-">ThentosUpdate'</a> (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a>) (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> a)</li><li class="src short"><span class="keyword">type</span> <a href="#t:ThentosUpdate-39-">ThentosUpdate'</a> e a = EitherT e (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-Trans-State-Lazy.html#t:StateT">StateT</a> <a href="Thentos-Types.html#t:DB">DB</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/transformers-0.3.0.0/Data-Functor-Identity.html#t:Identity">Identity</a>) a</li><li class="src short"><a href="#v:runThentosUpdate">runThentosUpdate</a> :: <span class="keyword">forall</span> a. <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Text-Show.html#t:Show">Show</a> a =&gt; <a href="Thentos-DB-Core.html#t:ThentosClearance">ThentosClearance</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> a -&gt; Update <a href="Thentos-Types.html#t:DB">DB</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> a)</li><li class="src short"><span class="keyword">type</span> <a href="#t:ThentosQuery">ThentosQuery</a> a = <a href="Thentos-DB-Core.html#t:ThentosQuery-39-">ThentosQuery'</a> (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a>) (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> a)</li><li class="src short"><span class="keyword">type</span> <a href="#t:ThentosQuery-39-">ThentosQuery'</a> e a = EitherT e (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> <a href="Thentos-Types.html#t:DB">DB</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/transformers-0.3.0.0/Data-Functor-Identity.html#t:Identity">Identity</a>) a</li><li class="src short"><a href="#v:runThentosQuery">runThentosQuery</a> :: <span class="keyword">forall</span> a. <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Text-Show.html#t:Show">Show</a> a =&gt; <a href="Thentos-DB-Core.html#t:ThentosClearance">ThentosClearance</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> a -&gt; Query <a href="Thentos-Types.html#t:DB">DB</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> a)</li><li class="src short"><a href="#v:liftThentosQuery">liftThentosQuery</a> :: <span class="keyword">forall</span> e a. <a href="Thentos-DB-Core.html#t:ThentosQuery-39-">ThentosQuery'</a> e a -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate-39-">ThentosUpdate'</a> e a</li><li class="src short"><a href="#v:returnDb">returnDb</a> :: <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a> -&gt; a -&gt; EitherT (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> e) m (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> a)</li><li class="src short"><a href="#v:throwDb">throwDb</a> :: <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a> -&gt; <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> -&gt; EitherT (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a>) m (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> a)</li><li class="src short"><a href="#v:thentosPublic">thentosPublic</a> :: <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></li><li class="src short"><a href="#v:thentosDenied">thentosDenied</a> :: <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></li><li class="src short"><a href="#v:thentosLabeledPublic">thentosLabeledPublic</a> ::  t -&gt; <a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> t</li><li class="src short"><a href="#v:thentosLabeledDenied">thentosLabeledDenied</a> ::  t -&gt; <a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> t</li><li class="src short"><a href="#v:-61--37--37-">(=%%)</a> :: (ToCNF a, ToCNF b) =&gt; a -&gt; b -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:TLMode">TLMode</a><ul class="subs"><li>= <a href="#v:TLRead">TLRead</a></li><li>| <a href="#v:TLReadWrite">TLReadWrite</a></li></ul></li><li class="src short"><a href="#v:makeThentosLabel">makeThentosLabel</a> :: ToCNF a =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; [a] -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></li><li class="src short"><a href="#v:restrictThentosLabel">restrictThentosLabel</a> :: ToCNF a =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a> -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></li><li class="src short"><a href="#v:restrictThentosLabel-39-">restrictThentosLabel'</a> :: ToCNF a =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a> -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></li><li class="src short"><a href="#v:makeThentosLabel1">makeThentosLabel1</a> :: ToCNF a =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></li><li class="src short"><a href="#v:makeThentosLabel2">makeThentosLabel2</a> :: (ToCNF a, ToCNF b) =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; b -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></li><li class="src short"><a href="#v:makeThentosLabel3">makeThentosLabel3</a> :: (ToCNF a, ToCNF b, ToCNF c) =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; b -&gt; c -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></li><li class="src short"><a href="#v:makeThentosLabel4">makeThentosLabel4</a> :: (ToCNF a, ToCNF b, ToCNF c, ToCNF d) =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; b -&gt; c -&gt; d -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></li><li class="src short"><a href="#v:makeThentosLabel5">makeThentosLabel5</a> :: (ToCNF a, ToCNF b, ToCNF c, ToCNF d, ToCNF e) =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; b -&gt; c -&gt; d -&gt; e -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></li><li class="src short"><a href="#v:createCheckpointLoop">createCheckpointLoop</a> ::  AcidState st -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/System-IO.html#t:IO">IO</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Concurrent.html#t:ThreadId">ThreadId</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:ThentosClearance" class="def">ThentosClearance</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ThentosClearance" class="def">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:fromThentosClearance" class="def">fromThentosClearance</a> :: DCLabel</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:ThentosClearance" class="caption collapser" onclick="toggleSection('i:ThentosClearance')">Instances</p><div id="section.i:ThentosClearance" class="show"><table><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Eq.html#t:Eq">Eq</a> <a href="Thentos-DB-Core.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Ord.html#t:Ord">Ord</a> <a href="Thentos-DB-Core.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Text-Read.html#t:Read">Read</a> <a href="Thentos-DB-Core.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Text-Show.html#t:Show">Show</a> <a href="Thentos-DB-Core.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">SafeCopy <a href="Thentos-DB-Core.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Label <a href="Thentos-DB-Core.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Core.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ThentosUpdate" class="def">ThentosUpdate</a> a = <a href="Thentos-DB-Core.html#t:ThentosUpdate-39-">ThentosUpdate'</a> (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a>) (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> a)</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ThentosUpdate-39-" class="def">ThentosUpdate'</a> e a = EitherT e (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-Trans-State-Lazy.html#t:StateT">StateT</a> <a href="Thentos-Types.html#t:DB">DB</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/transformers-0.3.0.0/Data-Functor-Identity.html#t:Identity">Identity</a>) a</p></div><div class="top"><p class="src"><a name="v:runThentosUpdate" class="def">runThentosUpdate</a> :: <span class="keyword">forall</span> a. <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Text-Show.html#t:Show">Show</a> a =&gt; <a href="Thentos-DB-Core.html#t:ThentosClearance">ThentosClearance</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> a -&gt; Update <a href="Thentos-Types.html#t:DB">DB</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> a)</p><div class="doc"><p>FIXME: generalize, so we can use this for both Update and Query.
 (remove <code><a href="Thentos-DB-Core.html#v:runThentosQuery">runThentosQuery</a></code> and <code><a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a></code> when done.)</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ThentosQuery" class="def">ThentosQuery</a> a = <a href="Thentos-DB-Core.html#t:ThentosQuery-39-">ThentosQuery'</a> (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a>) (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> a)</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ThentosQuery-39-" class="def">ThentosQuery'</a> e a = EitherT e (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> <a href="Thentos-Types.html#t:DB">DB</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/transformers-0.3.0.0/Data-Functor-Identity.html#t:Identity">Identity</a>) a</p></div><div class="top"><p class="src"><a name="v:runThentosQuery" class="def">runThentosQuery</a> :: <span class="keyword">forall</span> a. <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Text-Show.html#t:Show">Show</a> a =&gt; <a href="Thentos-DB-Core.html#t:ThentosClearance">ThentosClearance</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> a -&gt; Query <a href="Thentos-Types.html#t:DB">DB</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> a)</p></div><div class="top"><p class="src"><a name="v:liftThentosQuery" class="def">liftThentosQuery</a> :: <span class="keyword">forall</span> e a. <a href="Thentos-DB-Core.html#t:ThentosQuery-39-">ThentosQuery'</a> e a -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate-39-">ThentosUpdate'</a> e a</p></div><div class="top"><p class="src"><a name="v:returnDb" class="def">returnDb</a> :: <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a> -&gt; a -&gt; EitherT (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> e) m (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> a)</p></div><div class="top"><p class="src"><a name="v:throwDb" class="def">throwDb</a> :: <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a> -&gt; <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> -&gt; EitherT (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a>) m (<a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> a)</p></div><div class="top"><p class="src"><a name="v:thentosPublic" class="def">thentosPublic</a> :: <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></p></div><div class="top"><p class="src"><a name="v:thentosDenied" class="def">thentosDenied</a> :: <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></p></div><div class="top"><p class="src"><a name="v:thentosLabeledPublic" class="def">thentosLabeledPublic</a> ::  t -&gt; <a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> t</p></div><div class="top"><p class="src"><a name="v:thentosLabeledDenied" class="def">thentosLabeledDenied</a> ::  t -&gt; <a href="Thentos-Types.html#t:ThentosLabeled">ThentosLabeled</a> t</p></div><div class="top"><p class="src"><a name="v:-61--37--37-" class="def">(=%%)</a> :: (ToCNF a, ToCNF b) =&gt; a -&gt; b -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a> <span class="fixity">infix 6</span><span class="rightedge"></span></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:TLMode" class="def">TLMode</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:TLRead" class="def">TLRead</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:TLReadWrite" class="def">TLReadWrite</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:TLMode" class="caption collapser" onclick="toggleSection('i:TLMode')">Instances</p><div id="section.i:TLMode" class="show"><table><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Prelude.html#t:Bounded">Bounded</a> <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Prelude.html#t:Enum">Enum</a> <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Eq.html#t:Eq">Eq</a> <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Ord.html#t:Ord">Ord</a> <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Text-Show.html#t:Show">Show</a> <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:makeThentosLabel" class="def">makeThentosLabel</a> :: ToCNF a =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; [a] -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></p><div class="doc"><p>See also:</p><ul><li><code>makeClearance_</code> in <a href="Thentos-DB-Protected.html">Thentos.DB.Protected</a> (not exported)</li><li>test cases in <code>TestMain</code>.</li></ul></div></div><div class="top"><p class="src"><a name="v:restrictThentosLabel" class="def">restrictThentosLabel</a> :: ToCNF a =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a> -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></p></div><div class="top"><p class="src"><a name="v:restrictThentosLabel-39-" class="def">restrictThentosLabel'</a> :: ToCNF a =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a> -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></p></div><div class="top"><p class="src"><a name="v:makeThentosLabel1" class="def">makeThentosLabel1</a> :: ToCNF a =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></p></div><div class="top"><p class="src"><a name="v:makeThentosLabel2" class="def">makeThentosLabel2</a> :: (ToCNF a, ToCNF b) =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; b -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></p></div><div class="top"><p class="src"><a name="v:makeThentosLabel3" class="def">makeThentosLabel3</a> :: (ToCNF a, ToCNF b, ToCNF c) =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; b -&gt; c -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></p></div><div class="top"><p class="src"><a name="v:makeThentosLabel4" class="def">makeThentosLabel4</a> :: (ToCNF a, ToCNF b, ToCNF c, ToCNF d) =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; b -&gt; c -&gt; d -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></p></div><div class="top"><p class="src"><a name="v:makeThentosLabel5" class="def">makeThentosLabel5</a> :: (ToCNF a, ToCNF b, ToCNF c, ToCNF d, ToCNF e) =&gt; <a href="Thentos-DB-Core.html#t:TLMode">TLMode</a> -&gt; a -&gt; b -&gt; c -&gt; d -&gt; e -&gt; <a href="Thentos-Types.html#t:ThentosLabel">ThentosLabel</a></p></div><div class="top"><p class="src"><a name="v:createCheckpointLoop" class="def">createCheckpointLoop</a> ::  AcidState st -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/System-IO.html#t:IO">IO</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Concurrent.html#t:ThreadId">ThreadId</a></p><div class="doc"><p>Create a new thread that calls <code>createCheckpoint</code> synchronously,
 then waits for <code>timeThreshold</code> miliseconds, then repeats.  If
 <code>sizeThreshold</code> is <code><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#v:Just">Just</a></code> a size, create checkpoint only if size of
 segment of current change log since last checkpoint is larger than
 that.</p><p>FIXME: check change log size.  (i think this is only possible
 inside acid-state.)  https:/<em>github.com</em>acid-state/acid-state.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>