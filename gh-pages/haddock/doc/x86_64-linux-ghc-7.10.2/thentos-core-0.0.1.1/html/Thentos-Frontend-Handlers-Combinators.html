<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Thentos.Frontend.Handlers.Combinators</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Thentos-Frontend-Handlers-Combinators.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">thentos-core-0.0.1.1: The swiss army knife of privacy-preserving identity management</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Thentos.Frontend.Handlers.Combinators</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">helpers</a></li><li><a href="#g:2">dashboard construction</a></li><li><a href="#g:3">authentication</a></li><li><a href="#g:4">session management</a></li><li><a href="#g:5">uri manipulation</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:liftU">liftU</a> :: <a href="Thentos-Action-SimpleAuth.html#t:UnsafeAction">UnsafeAction</a> <a href="Thentos-Frontend-Types.html#t:FActionError">FActionError</a> <a href="Thentos-Frontend-Types.html#t:FrontendSessionData">FrontendSessionData</a> a -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</li><li class="src short"><a href="#v:loggerF">loggerF</a> :: <a href=""/>Show</a> v =&gt; v -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> ()</li><li class="src short"><a href="#v:loggerU">loggerU</a> :: <a href=""/>Show</a> v =&gt; v -&gt; <a href="Thentos-Action-SimpleAuth.html#t:UnsafeAction">UnsafeAction</a> <a href="Thentos-Frontend-Types.html#t:FActionError">FActionError</a> s ()</li><li class="src short"><a href="#v:setTab">setTab</a> :: <a href="Thentos-Frontend-Types.html#t:DashboardTab">DashboardTab</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> ()</li><li class="src short"><a href="#v:renderDashboard">renderDashboard</a> :: (<a href="Thentos-Types.html#t:User">User</a> -&gt; [<a href="Thentos-Types.html#t:Role">Role</a>] -&gt; Html) -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> Html</li><li class="src short"><a href="#v:renderDashboard-39-">renderDashboard'</a> :: (<a href="Thentos-Types.html#t:User">User</a> -&gt; [<a href="Thentos-Types.html#t:Role">Role</a>] -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> Html) -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> Html</li><li class="src short"><a href="#v:runAsUserOrLogin">runAsUserOrLogin</a> :: (<a href="Thentos-Frontend-Types.html#t:FrontendSessionData">FrontendSessionData</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FrontendSessionLoginData">FrontendSessionLoginData</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a) -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</li><li class="src short"><a href="#v:runAsUser">runAsUser</a> :: (<a href="Thentos-Frontend-Types.html#t:FrontendSessionData">FrontendSessionData</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FrontendSessionLoginData">FrontendSessionLoginData</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a) -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</li><li class="src short"><a href="#v:popServiceLoginState">popServiceLoginState</a> :: <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> (<a href=""/>Maybe</a> <a href="Thentos-Frontend-Types.html#t:ServiceLoginState">ServiceLoginState</a>)</li><li class="src short"><a href="#v:getServiceLoginState">getServiceLoginState</a> :: <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> <a href="Thentos-Frontend-Types.html#t:ServiceLoginState">ServiceLoginState</a></li><li class="src short"><a href="#v:sendFrontendMsgs">sendFrontendMsgs</a> :: [<a href="Thentos-Frontend-Types.html#t:FrontendMsg">FrontendMsg</a>] -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> ()</li><li class="src short"><a href="#v:sendFrontendMsg">sendFrontendMsg</a> :: <a href="Thentos-Frontend-Types.html#t:FrontendMsg">FrontendMsg</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> ()</li><li class="src short"><a href="#v:clearAllFrontendMsgs">clearAllFrontendMsgs</a> :: <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> ()</li><li class="src short"><a href="#v:showPageWithMessages">showPageWithMessages</a> :: (<a href="Thentos-Frontend-Types.html#t:FrontendSessionData">FrontendSessionData</a> -&gt; View Html -&gt; ST -&gt; Html) -&gt; View Html -&gt; ST -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> Html</li><li class="src short"><a href="#v:emailConfirmUrl">emailConfirmUrl</a> :: <a href="Thentos-Config.html#t:HttpConfig">HttpConfig</a> -&gt; ST -&gt; ST -&gt; ST</li><li class="src short"><a href="#v:redirect-39-">redirect'</a> :: SBS -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</li><li class="src short"><a href="#v:redirectURI">redirectURI</a> :: URI -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</li><li class="src short"><a href="#v:redirectRR">redirectRR</a> :: RelativeRef -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</li></ul></div><div id="interface"><h1 id="g:1">helpers</h1><div class="top"><p class="src"><a name="v:liftU" class="def">liftU</a> :: <a href="Thentos-Action-SimpleAuth.html#t:UnsafeAction">UnsafeAction</a> <a href="Thentos-Frontend-Types.html#t:FActionError">FActionError</a> <a href="Thentos-Frontend-Types.html#t:FrontendSessionData">FrontendSessionData</a> a -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</p></div><div class="top"><p class="src"><a name="v:loggerF" class="def">loggerF</a> :: <a href=""/>Show</a> v =&gt; v -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> ()</p></div><div class="top"><p class="src"><a name="v:loggerU" class="def">loggerU</a> :: <a href=""/>Show</a> v =&gt; v -&gt; <a href="Thentos-Action-SimpleAuth.html#t:UnsafeAction">UnsafeAction</a> <a href="Thentos-Frontend-Types.html#t:FActionError">FActionError</a> s ()</p></div><h1 id="g:2">dashboard construction</h1><div class="top"><p class="src"><a name="v:setTab" class="def">setTab</a> :: <a href="Thentos-Frontend-Types.html#t:DashboardTab">DashboardTab</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> ()</p><div class="doc"><p>If logged in: set current dashboard tab.</p></div></div><div class="top"><p class="src"><a name="v:renderDashboard" class="def">renderDashboard</a> :: (<a href="Thentos-Types.html#t:User">User</a> -&gt; [<a href="Thentos-Types.html#t:Role">Role</a>] -&gt; Html) -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> Html</p><div class="doc"><p>Call <code><a href="Thentos-Frontend-Handlers-Combinators.html#v:renderDashboard-39-">renderDashboard'</a></code> to construct a dashboard page and render it in the frontend monad.</p></div></div><div class="top"><p class="src"><a name="v:renderDashboard-39-" class="def">renderDashboard'</a> :: (<a href="Thentos-Types.html#t:User">User</a> -&gt; [<a href="Thentos-Types.html#t:Role">Role</a>] -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> Html) -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> Html</p><div class="doc"><p>Like <code><a href="Thentos-Frontend-Handlers-Combinators.html#v:renderDashboard">renderDashboard</a></code>, but take a pagelet builder instead of a pagelet.</p></div></div><h1 id="g:3">authentication</h1><div class="top"><p class="src"><a name="v:runAsUserOrLogin" class="def">runAsUserOrLogin</a> :: (<a href="Thentos-Frontend-Types.html#t:FrontendSessionData">FrontendSessionData</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FrontendSessionLoginData">FrontendSessionLoginData</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a) -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</p><div class="doc"><p>Call <code><a href="Thentos-Frontend-Handlers-Combinators.html#v:runAsUser">runAsUser</a></code>, and redirect to login page if not logged in.</p></div></div><div class="top"><p class="src"><a name="v:runAsUser" class="def">runAsUser</a> :: (<a href="Thentos-Frontend-Types.html#t:FrontendSessionData">FrontendSessionData</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FrontendSessionLoginData">FrontendSessionLoginData</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a) -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</p><div class="doc"><p>Runs a given handler with the credentials and the session data of the currently logged-in user.
 If not logged in, call a default handler that runs without any special clearance.  (NOTE:
 Clearance modification does not happen here, but in <code>enterFAction</code>.)</p></div></div><h1 id="g:4">session management</h1><div class="top"><p class="src"><a name="v:popServiceLoginState" class="def">popServiceLoginState</a> :: <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> (<a href=""/>Maybe</a> <a href="Thentos-Frontend-Types.html#t:ServiceLoginState">ServiceLoginState</a>)</p><div class="doc"><p>Recover the service login state from session, remove it there, and return it.  If no service
 login state is stored, return <code><a href=""/>Nothing</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:getServiceLoginState" class="def">getServiceLoginState</a> :: <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> <a href="Thentos-Frontend-Types.html#t:ServiceLoginState">ServiceLoginState</a></p></div><div class="top"><p class="src"><a name="v:sendFrontendMsgs" class="def">sendFrontendMsgs</a> :: [<a href="Thentos-Frontend-Types.html#t:FrontendMsg">FrontendMsg</a>] -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> ()</p></div><div class="top"><p class="src"><a name="v:sendFrontendMsg" class="def">sendFrontendMsg</a> :: <a href="Thentos-Frontend-Types.html#t:FrontendMsg">FrontendMsg</a> -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> ()</p></div><div class="top"><p class="src"><a name="v:clearAllFrontendMsgs" class="def">clearAllFrontendMsgs</a> :: <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> ()</p></div><div class="top"><p class="src"><a name="v:showPageWithMessages" class="def">showPageWithMessages</a> :: (<a href="Thentos-Frontend-Types.html#t:FrontendSessionData">FrontendSessionData</a> -&gt; View Html -&gt; ST -&gt; Html) -&gt; View Html -&gt; ST -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> Html</p></div><h1 id="g:5">uri manipulation</h1><div class="top"><p class="src"><a name="v:emailConfirmUrl" class="def">emailConfirmUrl</a> :: <a href="Thentos-Config.html#t:HttpConfig">HttpConfig</a> -&gt; ST -&gt; ST -&gt; ST</p></div><div class="top"><p class="src"><a name="v:redirect-39-" class="def">redirect'</a> :: SBS -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</p></div><div class="top"><p class="src"><a name="v:redirectURI" class="def">redirectURI</a> :: URI -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</p></div><div class="top"><p class="src"><a name="v:redirectRR" class="def">redirectRR</a> :: RelativeRef -&gt; <a href="Thentos-Frontend-Types.html#t:FAction">FAction</a> a</p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>