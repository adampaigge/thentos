<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Thentos.Backend.Core</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Thentos-Backend-Core.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">thentos-core-0.0.1.1: The swiss army knife of privacy-preserving identity management</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Thentos.Backend.Core</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">action</a></li><li><a href="#g:2">error handling</a></li><li><a href="#g:3">custom servers for servant</a></li><li><a href="#g:4">request headers</a></li><li><a href="#g:5">response headers</a></li><li><a href="#g:6">warp &amp; wai</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:enterAction">enterAction</a> :: <span class="keyword">forall</span> s e. (<a href=""/>Show</a> e, <a href=""/>Typeable</a> e) =&gt; s -&gt; <a href="Thentos-Action-Core.html#t:ActionState">ActionState</a> -&gt; (<a href="Thentos-Action-Core.html#t:ActionError">ActionError</a> e -&gt; <a href=""/>IO</a> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a>) -&gt; <a href=""/>Maybe</a> <a href="Thentos-Types.html#t:ThentosSessionToken">ThentosSessionToken</a> -&gt; <a href="Thentos-Action-Core.html#t:Action">Action</a> e s <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-Enter.html#t::-126--62-">:~&gt;</a> <a href=""/>ExceptT</a> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ErrorMessage">ErrorMessage</a> = <a href="#v:ErrorMessage">ErrorMessage</a> {<ul class="subs"><li><a href="#v:fromErrorMessage">fromErrorMessage</a> :: ST</li></ul>}</li><li class="src short"><a href="#v:mkServantErr">mkServantErr</a> :: <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> -&gt; ST -&gt; <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:ErrorInfo">ErrorInfo</a> a = (<a href=""/>Maybe</a> (Priority, <a href=""/>String</a>), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a>, a)</li><li class="src short"><a href="#v:errorInfoToServantErr">errorInfoToServantErr</a> :: (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> -&gt; a -&gt; <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a>) -&gt; <a href="Thentos-Backend-Core.html#t:ErrorInfo">ErrorInfo</a> a -&gt; <a href=""/>IO</a> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:baseActionErrorToServantErr">baseActionErrorToServantErr</a> :: <a href="Thentos-Action-Core.html#t:ActionError">ActionError</a> <a href=""/>Void</a> -&gt; <a href=""/>IO</a> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:actionErrorInfo">actionErrorInfo</a> :: <a href=""/>Show</a> e =&gt; (<a href="Thentos-Types.html#t:ThentosError">ThentosError</a> e -&gt; <a href="Thentos-Backend-Core.html#t:ErrorInfo">ErrorInfo</a> ST) -&gt; <a href="Thentos-Action-Core.html#t:ActionError">ActionError</a> e -&gt; <a href="Thentos-Backend-Core.html#t:ErrorInfo">ErrorInfo</a> ST</li><li class="src short"><a href="#v:thentosErrorInfo">thentosErrorInfo</a> :: <a href=""/>Show</a> e =&gt; (e -&gt; <a href="Thentos-Backend-Core.html#t:ErrorInfo">ErrorInfo</a> ST) -&gt; <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> e -&gt; <a href="Thentos-Backend-Core.html#t:ErrorInfo">ErrorInfo</a> ST</li><li class="src short"><span class="keyword">data</span> <a href="#t:Post200">Post200</a> contentTypes a</li><li class="src short"><span class="keyword">data</span> <a href="#t:ThentosHeaderName">ThentosHeaderName</a><ul class="subs"><li>= <a href="#v:ThentosHeaderSession">ThentosHeaderSession</a></li><li>| <a href="#v:ThentosHeaderService">ThentosHeaderService</a></li><li>| <a href="#v:ThentosHeaderUser">ThentosHeaderUser</a></li><li>| <a href="#v:ThentosHeaderGroups">ThentosHeaderGroups</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:RenderHeaderFun">RenderHeaderFun</a> = <a href="Thentos-Backend-Core.html#t:ThentosHeaderName">ThentosHeaderName</a> -&gt; CI SBS</li><li class="src short"><a href="#v:lookupThentosHeader">lookupThentosHeader</a> :: <a href="Thentos-Backend-Core.html#t:RenderHeaderFun">RenderHeaderFun</a> -&gt; Request -&gt; <a href="Thentos-Backend-Core.html#t:ThentosHeaderName">ThentosHeaderName</a> -&gt; <a href=""/>Maybe</a> ST</li><li class="src short"><a href="#v:lookupThentosHeaderSession">lookupThentosHeaderSession</a> :: <a href="Thentos-Backend-Core.html#t:RenderHeaderFun">RenderHeaderFun</a> -&gt; Request -&gt; <a href=""/>Maybe</a> <a href="Thentos-Types.html#t:ThentosSessionToken">ThentosSessionToken</a></li><li class="src short"><a href="#v:lookupThentosHeaderService">lookupThentosHeaderService</a> :: <a href="Thentos-Backend-Core.html#t:RenderHeaderFun">RenderHeaderFun</a> -&gt; Request -&gt; <a href=""/>Maybe</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a></li><li class="src short"><a href="#v:renderThentosHeaderName">renderThentosHeaderName</a> :: <a href="Thentos-Backend-Core.html#t:RenderHeaderFun">RenderHeaderFun</a></li><li class="src short"><a href="#v:badHeaders">badHeaders</a> :: [Header] -&gt; [Header]</li><li class="src short"><a href="#v:clearCustomHeaders">clearCustomHeaders</a> :: <a href="Thentos-Backend-Core.html#t:RenderHeaderFun">RenderHeaderFun</a> -&gt; RequestHeaders -&gt; RequestHeaders</li><li class="src short"><span class="keyword">data</span> <a href="#t:ThentosAssertHeaders">ThentosAssertHeaders</a></li><li class="src short"><a href="#v:contentTypeJsonHeader">contentTypeJsonHeader</a> :: Header</li><li class="src short"><a href="#v:httpCachePolicy">httpCachePolicy</a> :: ResponseHeaders</li><li class="src short"><a href="#v:addCacheControlHeaders">addCacheControlHeaders</a> :: Middleware</li><li class="src short"><a href="#v:addHeadersToResponse">addHeadersToResponse</a> :: ResponseHeaders -&gt; Response -&gt; Response</li><li class="src short"><span class="keyword">data</span> <a href="#t:CorsPolicy">CorsPolicy</a> = <a href="#v:CorsPolicy">CorsPolicy</a> {<ul class="subs"><li><a href="#v:corsHeaders">corsHeaders</a> :: SBS</li><li><a href="#v:corsMethods">corsMethods</a> :: SBS</li><li><a href="#v:corsOrigin">corsOrigin</a> :: SBS</li></ul>}</li><li class="src short"><a href="#v:addCorsHeaders">addCorsHeaders</a> :: <a href="Thentos-Backend-Core.html#t:CorsPolicy">CorsPolicy</a> -&gt; Middleware</li><li class="src short"><a href="#v:runWarpWithCfg">runWarpWithCfg</a> :: <a href="Thentos-Config.html#t:HttpConfig">HttpConfig</a> -&gt; Application -&gt; <a href=""/>IO</a> ()</li><li class="src short"><a href="#v:loggerMW">loggerMW</a> :: Middleware</li></ul></div><div id="interface"><h1 id="g:1">action</h1><div class="top"><p class="src"><a name="v:enterAction" class="def">enterAction</a> :: <span class="keyword">forall</span> s e. (<a href=""/>Show</a> e, <a href=""/>Typeable</a> e) =&gt; s -&gt; <a href="Thentos-Action-Core.html#t:ActionState">ActionState</a> -&gt; (<a href="Thentos-Action-Core.html#t:ActionError">ActionError</a> e -&gt; <a href=""/>IO</a> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a>) -&gt; <a href=""/>Maybe</a> <a href="Thentos-Types.html#t:ThentosSessionToken">ThentosSessionToken</a> -&gt; <a href="Thentos-Action-Core.html#t:Action">Action</a> e s <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-Enter.html#t::-126--62-">:~&gt;</a> <a href=""/>ExceptT</a> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a></p></div><h1 id="g:2">error handling</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:ErrorMessage" class="def">ErrorMessage</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ErrorMessage" class="def">ErrorMessage</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:fromErrorMessage" class="def">fromErrorMessage</a> :: ST</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:ErrorMessage" class="caption collapser" onclick="toggleSection('i:ErrorMessage')">Instances</p><div id="section.i:ErrorMessage" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Eq</a> <a href="Thentos-Backend-Core.html#t:ErrorMessage">ErrorMessage</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Show</a> <a href="Thentos-Backend-Core.html#t:ErrorMessage">ErrorMessage</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">ToJSON <a href="Thentos-Backend-Core.html#t:ErrorMessage">ErrorMessage</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:mkServantErr" class="def">mkServantErr</a> :: <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> -&gt; ST -&gt; <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a></p><div class="doc"><p>Construct a ServantErr that looks as our errors should.
 Status code and reason phrase are taken from the base error given as first argument.
 The message given as second argument is wrapped into a <code><a href="Thentos-Backend-Core.html#t:ErrorMessage">ErrorMessage</a></code> JSON object.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ErrorInfo" class="def">ErrorInfo</a> a = (<a href=""/>Maybe</a> (Priority, <a href=""/>String</a>), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a>, a)</p></div><div class="top"><p class="src"><a name="v:errorInfoToServantErr" class="def">errorInfoToServantErr</a> :: (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> -&gt; a -&gt; <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a>) -&gt; <a href="Thentos-Backend-Core.html#t:ErrorInfo">ErrorInfo</a> a -&gt; <a href=""/>IO</a> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a></p><div class="doc"><p>Log things, and construct a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a></code>.</p><p>If any logging is to take place, it should take place here, not near the place where the error is
 thrown.</p></div></div><div class="top"><p class="src"><a name="v:baseActionErrorToServantErr" class="def">baseActionErrorToServantErr</a> :: <a href="Thentos-Action-Core.html#t:ActionError">ActionError</a> <a href=""/>Void</a> -&gt; <a href=""/>IO</a> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:actionErrorInfo" class="def">actionErrorInfo</a> :: <a href=""/>Show</a> e =&gt; (<a href="Thentos-Types.html#t:ThentosError">ThentosError</a> e -&gt; <a href="Thentos-Backend-Core.html#t:ErrorInfo">ErrorInfo</a> ST) -&gt; <a href="Thentos-Action-Core.html#t:ActionError">ActionError</a> e -&gt; <a href="Thentos-Backend-Core.html#t:ErrorInfo">ErrorInfo</a> ST</p></div><div class="top"><p class="src"><a name="v:thentosErrorInfo" class="def">thentosErrorInfo</a> :: <a href=""/>Show</a> e =&gt; (e -&gt; <a href="Thentos-Backend-Core.html#t:ErrorInfo">ErrorInfo</a> ST) -&gt; <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> e -&gt; <a href="Thentos-Backend-Core.html#t:ErrorInfo">ErrorInfo</a> ST</p></div><h1 id="g:3">custom servers for servant</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Post200" class="def">Post200</a> contentTypes a</p><div class="subs instances"><p id="control.i:Post200" class="caption collapser" onclick="toggleSection('i:Post200')">Instances</p><div id="section.i:Post200" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-Utils-Links.html#t:HasLink">HasLink</a> * (<a href="Thentos-Backend-Core.html#t:Post200">Post200</a> ctypes a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="Thentos-Backend-Core.html#t:Post200">Post200</a> ctypes a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">type</span> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-Utils-Links.html#t:MkLink">MkLink</a> * (<a href="Thentos-Backend-Core.html#t:Post200">Post200</a> ctypes a) = <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-Utils-Links.html#t:URI">URI</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">type</span> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal.html#t:ServerT">ServerT</a> * (<a href="Thentos-Backend-Core.html#t:Post200">Post200</a> ctypes a) m = m a</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">type</span> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-foreign-0.5/html/Servant-Foreign.html#t:Foreign">Foreign</a> (<a href="Thentos-Backend-Core.html#t:Post200">Post200</a> ((:) * <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:JSON">JSON</a> ([] *)) a) = <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-foreign-0.5/html/Servant-Foreign.html#t:Req">Req</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:4">request headers</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ThentosHeaderName" class="def">ThentosHeaderName</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ThentosHeaderSession" class="def">ThentosHeaderSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:ThentosHeaderService" class="def">ThentosHeaderService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:ThentosHeaderUser" class="def">ThentosHeaderUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:ThentosHeaderGroups" class="def">ThentosHeaderGroups</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:ThentosHeaderName" class="caption collapser" onclick="toggleSection('i:ThentosHeaderName')">Instances</p><div id="section.i:ThentosHeaderName" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Bounded</a> <a href="Thentos-Backend-Core.html#t:ThentosHeaderName">ThentosHeaderName</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Enum</a> <a href="Thentos-Backend-Core.html#t:ThentosHeaderName">ThentosHeaderName</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Eq</a> <a href="Thentos-Backend-Core.html#t:ThentosHeaderName">ThentosHeaderName</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Ord</a> <a href="Thentos-Backend-Core.html#t:ThentosHeaderName">ThentosHeaderName</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Read</a> <a href="Thentos-Backend-Core.html#t:ThentosHeaderName">ThentosHeaderName</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Show</a> <a href="Thentos-Backend-Core.html#t:ThentosHeaderName">ThentosHeaderName</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:RenderHeaderFun" class="def">RenderHeaderFun</a> = <a href="Thentos-Backend-Core.html#t:ThentosHeaderName">ThentosHeaderName</a> -&gt; CI SBS</p></div><div class="top"><p class="src"><a name="v:lookupThentosHeader" class="def">lookupThentosHeader</a> :: <a href="Thentos-Backend-Core.html#t:RenderHeaderFun">RenderHeaderFun</a> -&gt; Request -&gt; <a href="Thentos-Backend-Core.html#t:ThentosHeaderName">ThentosHeaderName</a> -&gt; <a href=""/>Maybe</a> ST</p></div><div class="top"><p class="src"><a name="v:lookupThentosHeaderSession" class="def">lookupThentosHeaderSession</a> :: <a href="Thentos-Backend-Core.html#t:RenderHeaderFun">RenderHeaderFun</a> -&gt; Request -&gt; <a href=""/>Maybe</a> <a href="Thentos-Types.html#t:ThentosSessionToken">ThentosSessionToken</a></p></div><div class="top"><p class="src"><a name="v:lookupThentosHeaderService" class="def">lookupThentosHeaderService</a> :: <a href="Thentos-Backend-Core.html#t:RenderHeaderFun">RenderHeaderFun</a> -&gt; Request -&gt; <a href=""/>Maybe</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a></p></div><div class="top"><p class="src"><a name="v:renderThentosHeaderName" class="def">renderThentosHeaderName</a> :: <a href="Thentos-Backend-Core.html#t:RenderHeaderFun">RenderHeaderFun</a></p></div><div class="top"><p class="src"><a name="v:badHeaders" class="def">badHeaders</a> :: [Header] -&gt; [Header]</p><div class="doc"><p>Filter header list for all headers that start with <a href="X-Thentos-.html">X-Thentos-</a>, but don't correspond to
 the default rendering of any <code><a href="Thentos-Backend-Core.html#t:ThentosHeaderName">ThentosHeaderName</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:clearCustomHeaders" class="def">clearCustomHeaders</a> :: <a href="Thentos-Backend-Core.html#t:RenderHeaderFun">RenderHeaderFun</a> -&gt; RequestHeaders -&gt; RequestHeaders</p><div class="doc"><p>Remove all headers matched by a <code><a href="Thentos-Backend-Core.html#t:RenderHeaderFun">RenderHeaderFun</a></code>.  This is useful if the request is to be
 used as a basis for e.g. constructing another request to a proxy target.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ThentosAssertHeaders" class="def">ThentosAssertHeaders</a></p><div class="doc"><p>Make sure that all thentos headers are good (<code><a href="Thentos-Backend-Core.html#v:badHeaders">badHeaders</a></code> yields empty list).</p></div><div class="subs instances"><p id="control.i:ThentosAssertHeaders" class="caption collapser" onclick="toggleSection('i:ThentosAssertHeaders')">Instances</p><div id="section.i:ThentosAssertHeaders" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-Utils-Links.html#t:HasLink">HasLink</a> * sub =&gt; <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-Utils-Links.html#t:HasLink">HasLink</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * * <a href="Thentos-Backend-Core.html#t:ThentosAssertHeaders">ThentosAssertHeaders</a> sub)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal.html#t:HasServer">HasServer</a> * subserver =&gt; <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * * <a href="Thentos-Backend-Core.html#t:ThentosAssertHeaders">ThentosAssertHeaders</a> subserver)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">type</span> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-Utils-Links.html#t:MkLink">MkLink</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * * <a href="Thentos-Backend-Core.html#t:ThentosAssertHeaders">ThentosAssertHeaders</a> sub) = <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-Utils-Links.html#t:MkLink">MkLink</a> * sub</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">type</span> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal.html#t:ServerT">ServerT</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * * <a href="Thentos-Backend-Core.html#t:ThentosAssertHeaders">ThentosAssertHeaders</a> subserver) m = <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-server-0.5/html/Servant-Server-Internal.html#t:ServerT">ServerT</a> * subserver m</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">type</span> <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-foreign-0.5/html/Servant-Foreign.html#t:Foreign">Foreign</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * * <a href="Thentos-Backend-Core.html#t:ThentosAssertHeaders">ThentosAssertHeaders</a> sub) = <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-foreign-0.5/html/Servant-Foreign.html#t:Foreign">Foreign</a> sub</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:5">response headers</h1><div class="top"><p class="src"><a name="v:contentTypeJsonHeader" class="def">contentTypeJsonHeader</a> :: Header</p><div class="doc"><p>header setting the Content-Type to JSON.</p></div></div><div class="top"><p class="src"><a name="v:httpCachePolicy" class="def">httpCachePolicy</a> :: ResponseHeaders</p><div class="doc"><p>Cache-control headers in HTTP responses.  This is currently just a constant list of headers.</p><p>FUTURE WORK: We may want for this to come from <a href="Thentos-Config.html">Thentos.Config</a>.  We may also want to the policy
 to be a function in the request for which the response is constructed.  Not sure how best to
 combine these two requirements.</p></div></div><div class="top"><p class="src"><a name="v:addCacheControlHeaders" class="def">addCacheControlHeaders</a> :: Middleware</p><div class="doc"><p>Add suitable cache-control headers to HTTP responses. For now, this just prevents caching of
 all GET/HEAD requests (other HTTP methods are considered uncacheable by default). In the future
 we may use more refined caching strategies.</p></div></div><div class="top"><p class="src"><a name="v:addHeadersToResponse" class="def">addHeadersToResponse</a> :: ResponseHeaders -&gt; Response -&gt; Response</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:CorsPolicy" class="def">CorsPolicy</a></p><div class="doc"><p>Policy for Cross-origin Resource Sharing (CORS).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:CorsPolicy" class="def">CorsPolicy</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:corsHeaders" class="def">corsHeaders</a> :: SBS</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:corsMethods" class="def">corsMethods</a> :: SBS</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:corsOrigin" class="def">corsOrigin</a> :: SBS</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:addCorsHeaders" class="def">addCorsHeaders</a> :: <a href="Thentos-Backend-Core.html#t:CorsPolicy">CorsPolicy</a> -&gt; Middleware</p><div class="doc"><p>Add &quot;Access-Control-Allow-...&quot; headers based on a <code><a href="Thentos-Backend-Core.html#t:CorsPolicy">CorsPolicy</a></code>.</p></div></div><h1 id="g:6">warp &amp; wai</h1><div class="top"><p class="src"><a name="v:runWarpWithCfg" class="def">runWarpWithCfg</a> :: <a href="Thentos-Config.html#t:HttpConfig">HttpConfig</a> -&gt; Application -&gt; <a href=""/>IO</a> ()</p></div><div class="top"><p class="src"><a name="v:loggerMW" class="def">loggerMW</a> :: Middleware</p><div class="doc"><p>Write all requests and responses to log file with prio <code>DEBUG</code>.  Since <code>Response</code> does not have
 a <code><a href=""/>Show</a></code> instance, only dump the showable parts.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>