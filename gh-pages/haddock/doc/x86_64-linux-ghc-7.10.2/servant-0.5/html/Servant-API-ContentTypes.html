<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Servant.API.ContentTypes</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Servant-API-ContentTypes.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">servant-0.5: A family of combinators for defining webservices APIs</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Servant.API.ContentTypes</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Provided Content-Types</a></li><li><a href="#g:2">Building your own Content-Type</a></li><li><a href="#g:3">Internal</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A collection of basic Content-Types (also known as Internet Media
 Types, or MIME types). Additionally, this module provides classes that
 encapsulate how to serialize or deserialize values to or from
 a particular Content-Type.</p><p>Content-Types are used in <code>ReqBody</code> and the method combinators:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>type MyEndpoint = ReqBody '[JSON, PlainText] Book :&gt; Get '[JSON, PlainText] :&gt; Book
</code></strong></pre><p>Meaning the endpoint accepts requests of Content-Type <code>application/json</code>
 or <code>text/plain;charset-utf8</code>, and returns data in either one of those
 formats (depending on the <code>Accept</code> header).</p><p>If you would like to support Content-Types beyond those provided here,
 then:</p><ol><li>Declare a new data type with no constructors (e.g. <code>data HTML</code>).</li><li>Make an instance of it for <code><a href="Servant-API-ContentTypes.html#t:Accept">Accept</a></code>.</li><li>If you want to be able to serialize data *into* that
      Content-Type, make an instance of it for <code><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a></code>.</li><li>If you want to be able to deserialize data *from* that
      Content-Type, make an instance of it for <code><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a></code>.</li></ol><p>Note that roles are reversed in <code>servant-server</code> and <code>servant-client</code>:
 to be able to serve (or even typecheck) a <code>Get '[JSON, XML] MyData</code>,
 you'll need to have the appropriate <code><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a></code> instances in scope,
 whereas to query that endpoint with <code>servant-client</code>, you'll need
 a <code><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a></code> instance in scope.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:JSON">JSON</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PlainText">PlainText</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:FormUrlEncoded">FormUrlEncoded</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:OctetStream">OctetStream</a></li><li class="src short"><span class="keyword">class</span> <a href="#t:Accept">Accept</a> ctype <span class="keyword">where</span><ul class="subs"><li><a href="#v:contentType">contentType</a> :: <a href=""/>Proxy</a> ctype -&gt; MediaType</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> ctype =&gt; <a href="#t:MimeRender">MimeRender</a> ctype a <span class="keyword">where</span><ul class="subs"><li><a href="#v:mimeRender">mimeRender</a> :: <a href=""/>Proxy</a> ctype -&gt; a -&gt; <a href=""/>ByteString</a></li></ul></li><li class="src short"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> ctype =&gt; <a href="#t:MimeUnrender">MimeUnrender</a> ctype a <span class="keyword">where</span><ul class="subs"><li><a href="#v:mimeUnrender">mimeUnrender</a> :: <a href=""/>Proxy</a> ctype -&gt; <a href=""/>ByteString</a> -&gt; <a href=""/>Either</a> <a href=""/>String</a> a</li></ul></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:AcceptHeader">AcceptHeader</a> = <a href="#v:AcceptHeader">AcceptHeader</a> <a href=""/>ByteString</a></li><li class="src short"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:AllMimeRender">AllMimeRender</a> list a =&gt; <a href="#t:AllCTRender">AllCTRender</a> list a <span class="keyword">where</span><ul class="subs"><li><a href="#v:handleAcceptH">handleAcceptH</a> :: <a href=""/>Proxy</a> list -&gt; <a href="Servant-API-ContentTypes.html#t:AcceptHeader">AcceptHeader</a> -&gt; a -&gt; <a href=""/>Maybe</a> (<a href=""/>ByteString</a>, <a href=""/>ByteString</a>)</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:IsNonEmpty">IsNonEmpty</a> list =&gt; <a href="#t:AllCTUnrender">AllCTUnrender</a> list a <span class="keyword">where</span><ul class="subs"><li><a href="#v:handleCTypeH">handleCTypeH</a> :: <a href=""/>Proxy</a> list -&gt; <a href=""/>ByteString</a> -&gt; <a href=""/>ByteString</a> -&gt; <a href=""/>Maybe</a> (<a href=""/>Either</a> <a href=""/>String</a> a)</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="#t:AllMime">AllMime</a> list <span class="keyword">where</span><ul class="subs"><li><a href="#v:allMime">allMime</a> :: <a href=""/>Proxy</a> list -&gt; [MediaType]</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:AllMime">AllMime</a> list =&gt; <a href="#t:AllMimeRender">AllMimeRender</a> list a <span class="keyword">where</span><ul class="subs"><li><a href="#v:allMimeRender">allMimeRender</a> :: <a href=""/>Proxy</a> list -&gt; a -&gt; [(MediaType, <a href=""/>ByteString</a>)]</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:AllMime">AllMime</a> list =&gt; <a href="#t:AllMimeUnrender">AllMimeUnrender</a> list a <span class="keyword">where</span><ul class="subs"><li><a href="#v:allMimeUnrender">allMimeUnrender</a> :: <a href=""/>Proxy</a> list -&gt; <a href=""/>ByteString</a> -&gt; [(MediaType, <a href=""/>Either</a> <a href=""/>String</a> a)]</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="#t:FromFormUrlEncoded">FromFormUrlEncoded</a> a <span class="keyword">where</span><ul class="subs"><li><a href="#v:fromFormUrlEncoded">fromFormUrlEncoded</a> :: [(Text, Text)] -&gt; <a href=""/>Either</a> <a href=""/>String</a> a</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="#t:ToFormUrlEncoded">ToFormUrlEncoded</a> a <span class="keyword">where</span><ul class="subs"><li><a href="#v:toFormUrlEncoded">toFormUrlEncoded</a> :: a -&gt; [(Text, Text)]</li></ul></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsNonEmpty">IsNonEmpty</a> list :: <a href=""/>Constraint</a></li><li class="src short"><a href="#v:eitherDecodeLenient">eitherDecodeLenient</a> :: FromJSON a =&gt; <a href=""/>ByteString</a> -&gt; <a href=""/>Either</a> <a href=""/>String</a> a</li><li class="src short"><a href="#v:canHandleAcceptH">canHandleAcceptH</a> :: <a href="Servant-API-ContentTypes.html#t:AllMime">AllMime</a> list =&gt; <a href=""/>Proxy</a> list -&gt; <a href="Servant-API-ContentTypes.html#t:AcceptHeader">AcceptHeader</a> -&gt; <a href=""/>Bool</a></li></ul></div><div id="interface"><h1 id="g:1">Provided Content-Types</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:JSON" class="def">JSON</a></p><div class="subs instances"><p id="control.i:JSON" class="caption collapser" onclick="toggleSection('i:JSON')">Instances</p><div id="section.i:JSON" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> * <a href="Servant-API-ContentTypes.html#t:JSON">JSON</a></span></td><td class="doc"><pre>application/json</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">FromJSON a =&gt; <a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:JSON">JSON</a> a</span></td><td class="doc"><p><code>eitherDecode</code></p></td></tr><tr><td class="src clearfix"><span class="inst-left">ToJSON a =&gt; <a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:JSON">JSON</a> a</span></td><td class="doc"><p><code>encode</code></p></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:PlainText" class="def">PlainText</a></p><div class="subs instances"><p id="control.i:PlainText" class="caption collapser" onclick="toggleSection('i:PlainText')">Instances</p><div id="section.i:PlainText" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a></span></td><td class="doc"><pre>text/plain;charset=utf-8</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> <a href=""/>String</a></span></td><td class="doc"><pre>Right . BC.unpack</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> Text</span></td><td class="doc"><pre>left show . TextL.decodeUtf8'</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> Text</span></td><td class="doc"><pre>left show . TextS.decodeUtf8' . toStrict</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> <a href=""/>String</a></span></td><td class="doc"><pre>BC.pack</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> Text</span></td><td class="doc"><p><code>encodeUtf8</code></p></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> Text</span></td><td class="doc"><pre>fromStrict . TextS.encodeUtf8</pre></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:FormUrlEncoded" class="def">FormUrlEncoded</a></p><div class="subs instances"><p id="control.i:FormUrlEncoded" class="caption collapser" onclick="toggleSection('i:FormUrlEncoded')">Instances</p><div id="section.i:FormUrlEncoded" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> * <a href="Servant-API-ContentTypes.html#t:FormUrlEncoded">FormUrlEncoded</a></span></td><td class="doc"><pre>application/x-www-form-urlencoded</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:FromFormUrlEncoded">FromFormUrlEncoded</a> a =&gt; <a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:FormUrlEncoded">FormUrlEncoded</a> a</span></td><td class="doc"><p><code>decodeFormUrlEncoded &gt;=&gt; fromFormUrlEncoded</code>
 Note that the <code>mimeUnrender p (mimeRender p x) == Right x</code> law only
 holds if every element of x is non-null (i.e., not <code>(&quot;&quot;, &quot;&quot;)</code>)</p></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:ToFormUrlEncoded">ToFormUrlEncoded</a> a =&gt; <a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:FormUrlEncoded">FormUrlEncoded</a> a</span></td><td class="doc"><p><code>encodeFormUrlEncoded . toFormUrlEncoded</code>
 Note that the <code>mimeUnrender p (mimeRender p x) == Right x</code> law only
 holds if every element of x is non-null (i.e., not <code>(&quot;&quot;, &quot;&quot;)</code>)</p></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:OctetStream" class="def">OctetStream</a></p><div class="subs instances"><p id="control.i:OctetStream" class="caption collapser" onclick="toggleSection('i:OctetStream')">Instances</p><div id="section.i:OctetStream" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> * <a href="Servant-API-ContentTypes.html#t:OctetStream">OctetStream</a></span></td><td class="doc"><pre>application/octet-stream</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:OctetStream">OctetStream</a> <a href=""/>ByteString</a></span></td><td class="doc"><pre>Right . toStrict</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:OctetStream">OctetStream</a> <a href=""/>ByteString</a></span></td><td class="doc"><pre>Right . id</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:OctetStream">OctetStream</a> <a href=""/>ByteString</a></span></td><td class="doc"><p><code><a href=""/>fromStrict</a></code></p></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:OctetStream">OctetStream</a> <a href=""/>ByteString</a></span></td><td class="doc"><pre>id</pre></td></tr></table></div></div></div><h1 id="g:2">Building your own Content-Type</h1><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:Accept" class="def">Accept</a> ctype <span class="keyword">where</span></p><div class="doc"><p>Instances of <code><a href="Servant-API-ContentTypes.html#t:Accept">Accept</a></code> represent mimetypes. They are used for matching
 against the <code>Accept</code> HTTP header of the request, and for setting the
 <code>Content-Type</code> header of the response</p><p>Example:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Network.HTTP.Media ((//), (/:))
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>data HTML
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>instance Accept HTML where
   contentType _ = &quot;text&quot; // &quot;html&quot; /: (&quot;charset&quot;, &quot;utf-8&quot;)
:}
</pre></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:contentType" class="def">contentType</a> :: <a href=""/>Proxy</a> ctype -&gt; MediaType</p></div><div class="subs instances"><p id="control.i:Accept" class="caption collapser" onclick="toggleSection('i:Accept')">Instances</p><div id="section.i:Accept" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> * <a href="Servant-API-ContentTypes.html#t:OctetStream">OctetStream</a></span></td><td class="doc"><pre>application/octet-stream</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> * <a href="Servant-API-ContentTypes.html#t:FormUrlEncoded">FormUrlEncoded</a></span></td><td class="doc"><pre>application/x-www-form-urlencoded</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a></span></td><td class="doc"><pre>text/plain;charset=utf-8</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> * <a href="Servant-API-ContentTypes.html#t:JSON">JSON</a></span></td><td class="doc"><pre>application/json</pre></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> ctype =&gt; <a name="t:MimeRender" class="def">MimeRender</a> ctype a <span class="keyword">where</span></p><div class="doc"><p>Instantiate this class to register a way of serializing a type based
 on the <code>Accept</code> header.</p><p>Example:</p><pre>data MyContentType

instance Accept MyContentType where
   contentType _ = &quot;example&quot; // &quot;prs.me.mine&quot; /: (&quot;charset&quot;, &quot;utf-8&quot;)

instance Show a =&gt; MimeRender MyContentType where
   mimeRender _ val = pack (&quot;This is MINE! &quot; ++ show val)

type MyAPI = &quot;path&quot; :&gt; Get '[MyContentType] Int</pre></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:mimeRender" class="def">mimeRender</a> :: <a href=""/>Proxy</a> ctype -&gt; a -&gt; <a href=""/>ByteString</a></p></div><div class="subs instances"><p id="control.i:MimeRender" class="caption collapser" onclick="toggleSection('i:MimeRender')">Instances</p><div id="section.i:MimeRender" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:OctetStream">OctetStream</a> <a href=""/>ByteString</a></span></td><td class="doc"><p><code><a href=""/>fromStrict</a></code></p></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:OctetStream">OctetStream</a> <a href=""/>ByteString</a></span></td><td class="doc"><pre>id</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:ToFormUrlEncoded">ToFormUrlEncoded</a> a =&gt; <a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:FormUrlEncoded">FormUrlEncoded</a> a</span></td><td class="doc"><p><code>encodeFormUrlEncoded . toFormUrlEncoded</code>
 Note that the <code>mimeUnrender p (mimeRender p x) == Right x</code> law only
 holds if every element of x is non-null (i.e., not <code>(&quot;&quot;, &quot;&quot;)</code>)</p></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> <a href=""/>String</a></span></td><td class="doc"><pre>BC.pack</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> Text</span></td><td class="doc"><p><code>encodeUtf8</code></p></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> Text</span></td><td class="doc"><pre>fromStrict . TextS.encodeUtf8</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">ToJSON a =&gt; <a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * <a href="Servant-API-ContentTypes.html#t:JSON">JSON</a> a</span></td><td class="doc"><p><code>encode</code></p></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> ctype =&gt; <a name="t:MimeUnrender" class="def">MimeUnrender</a> ctype a <span class="keyword">where</span></p><div class="doc"><p>Instantiate this class to register a way of deserializing a type based
 on the request's <code>Content-Type</code> header.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Network.HTTP.Media hiding (Accept)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Data.ByteString.Lazy.Char8 as BSC
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>data MyContentType = MyContentType String
</code></strong></pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>instance Accept MyContentType where
   contentType _ = &quot;example&quot; // &quot;prs.me.mine&quot; /: (&quot;charset&quot;, &quot;utf-8&quot;)
:}
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>instance Read a =&gt; MimeUnrender MyContentType a where
   mimeUnrender _ bs = case BSC.take 12 bs of
     &quot;MyContentType&quot; -&gt; return . read . BSC.unpack $ BSC.drop 12 bs
     _ -&gt; Left &quot;didn't start with the magic incantation&quot;
:}
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>type MyAPI = &quot;path&quot; :&gt; ReqBody '[MyContentType] Int :&gt; Get '[JSON] Int
</code></strong></pre></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:mimeUnrender" class="def">mimeUnrender</a> :: <a href=""/>Proxy</a> ctype -&gt; <a href=""/>ByteString</a> -&gt; <a href=""/>Either</a> <a href=""/>String</a> a</p></div><div class="subs instances"><p id="control.i:MimeUnrender" class="caption collapser" onclick="toggleSection('i:MimeUnrender')">Instances</p><div id="section.i:MimeUnrender" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:OctetStream">OctetStream</a> <a href=""/>ByteString</a></span></td><td class="doc"><pre>Right . toStrict</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:OctetStream">OctetStream</a> <a href=""/>ByteString</a></span></td><td class="doc"><pre>Right . id</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:FromFormUrlEncoded">FromFormUrlEncoded</a> a =&gt; <a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:FormUrlEncoded">FormUrlEncoded</a> a</span></td><td class="doc"><p><code>decodeFormUrlEncoded &gt;=&gt; fromFormUrlEncoded</code>
 Note that the <code>mimeUnrender p (mimeRender p x) == Right x</code> law only
 holds if every element of x is non-null (i.e., not <code>(&quot;&quot;, &quot;&quot;)</code>)</p></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> <a href=""/>String</a></span></td><td class="doc"><pre>Right . BC.unpack</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> Text</span></td><td class="doc"><pre>left show . TextL.decodeUtf8'</pre></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:PlainText">PlainText</a> Text</span></td><td class="doc"><pre>left show . TextS.decodeUtf8' . toStrict</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">FromJSON a =&gt; <a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * <a href="Servant-API-ContentTypes.html#t:JSON">JSON</a> a</span></td><td class="doc"><p><code>eitherDecode</code></p></td></tr></table></div></div></div><h1 id="g:3">Internal</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:AcceptHeader" class="def">AcceptHeader</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:AcceptHeader" class="def">AcceptHeader</a> <a href=""/>ByteString</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AcceptHeader" class="caption collapser" onclick="toggleSection('i:AcceptHeader')">Instances</p><div id="section.i:AcceptHeader" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Eq</a> <a href="Servant-API-ContentTypes.html#t:AcceptHeader">AcceptHeader</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Show</a> <a href="Servant-API-ContentTypes.html#t:AcceptHeader">AcceptHeader</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:AllMimeRender">AllMimeRender</a> list a =&gt; <a name="t:AllCTRender" class="def">AllCTRender</a> list a <span class="keyword">where</span></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:handleAcceptH" class="def">handleAcceptH</a> :: <a href=""/>Proxy</a> list -&gt; <a href="Servant-API-ContentTypes.html#t:AcceptHeader">AcceptHeader</a> -&gt; a -&gt; <a href=""/>Maybe</a> (<a href=""/>ByteString</a>, <a href=""/>ByteString</a>)</p></div><div class="subs instances"><p id="control.i:AllCTRender" class="caption collapser" onclick="toggleSection('i:AllCTRender')">Instances</p><div id="section.i:AllCTRender" class="show"><table><tr><td class="src clearfix"><span class="inst-left">(<a href="Servant-API-ContentTypes.html#t:AllMimeRender">AllMimeRender</a> ctyps a, <a href="Servant-API-ContentTypes.html#t:IsNonEmpty">IsNonEmpty</a> ctyps) =&gt; <a href="Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctyps a</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:IsNonEmpty">IsNonEmpty</a> list =&gt; <a name="t:AllCTUnrender" class="def">AllCTUnrender</a> list a <span class="keyword">where</span></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:handleCTypeH" class="def">handleCTypeH</a> :: <a href=""/>Proxy</a> list -&gt; <a href=""/>ByteString</a> -&gt; <a href=""/>ByteString</a> -&gt; <a href=""/>Maybe</a> (<a href=""/>Either</a> <a href=""/>String</a> a)</p></div><div class="subs instances"><p id="control.i:AllCTUnrender" class="caption collapser" onclick="toggleSection('i:AllCTUnrender')">Instances</p><div id="section.i:AllCTUnrender" class="show"><table><tr><td class="src clearfix"><span class="inst-left">(<a href="Servant-API-ContentTypes.html#t:AllMimeUnrender">AllMimeUnrender</a> ctyps a, <a href="Servant-API-ContentTypes.html#t:IsNonEmpty">IsNonEmpty</a> ctyps) =&gt; <a href="Servant-API-ContentTypes.html#t:AllCTUnrender">AllCTUnrender</a> ctyps a</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:AllMime" class="def">AllMime</a> list <span class="keyword">where</span></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:allMime" class="def">allMime</a> :: <a href=""/>Proxy</a> list -&gt; [MediaType]</p></div><div class="subs instances"><p id="control.i:AllMime" class="caption collapser" onclick="toggleSection('i:AllMime')">Instances</p><div id="section.i:AllMime" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:AllMime">AllMime</a> ([] *)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Servant-API-ContentTypes.html#t:Accept">Accept</a> * ctyp, <a href="Servant-API-ContentTypes.html#t:AllMime">AllMime</a> ctyps) =&gt; <a href="Servant-API-ContentTypes.html#t:AllMime">AllMime</a> ((:) * ctyp ctyps)</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:AllMime">AllMime</a> list =&gt; <a name="t:AllMimeRender" class="def">AllMimeRender</a> list a <span class="keyword">where</span></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:allMimeRender" class="def">allMimeRender</a> :: <a href=""/>Proxy</a> list -&gt; a -&gt; [(MediaType, <a href=""/>ByteString</a>)]</p></div><div class="subs instances"><p id="control.i:AllMimeRender" class="caption collapser" onclick="toggleSection('i:AllMimeRender')">Instances</p><div id="section.i:AllMimeRender" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:AllMimeRender">AllMimeRender</a> ([] *) a</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * ctyp a, <a href="Servant-API-ContentTypes.html#t:AllMimeRender">AllMimeRender</a> ((:) * ctyp' ctyps) a) =&gt; <a href="Servant-API-ContentTypes.html#t:AllMimeRender">AllMimeRender</a> ((:) * ctyp ((:) * ctyp' ctyps)) a</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:MimeRender">MimeRender</a> * ctyp a =&gt; <a href="Servant-API-ContentTypes.html#t:AllMimeRender">AllMimeRender</a> ((:) * ctyp ([] *)) a</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Servant-API-ContentTypes.html#t:AllMime">AllMime</a> list =&gt; <a name="t:AllMimeUnrender" class="def">AllMimeUnrender</a> list a <span class="keyword">where</span></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:allMimeUnrender" class="def">allMimeUnrender</a> :: <a href=""/>Proxy</a> list -&gt; <a href=""/>ByteString</a> -&gt; [(MediaType, <a href=""/>Either</a> <a href=""/>String</a> a)]</p></div><div class="subs instances"><p id="control.i:AllMimeUnrender" class="caption collapser" onclick="toggleSection('i:AllMimeUnrender')">Instances</p><div id="section.i:AllMimeUnrender" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:AllMimeUnrender">AllMimeUnrender</a> ([] *) a</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Servant-API-ContentTypes.html#t:MimeUnrender">MimeUnrender</a> * ctyp a, <a href="Servant-API-ContentTypes.html#t:AllMimeUnrender">AllMimeUnrender</a> ctyps a) =&gt; <a href="Servant-API-ContentTypes.html#t:AllMimeUnrender">AllMimeUnrender</a> ((:) * ctyp ctyps) a</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:FromFormUrlEncoded" class="def">FromFormUrlEncoded</a> a <span class="keyword">where</span></p><div class="doc"><p>A type that can be converted from <code>application/x-www-form-urlencoded</code>,
 with the possibility of failure.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:fromFormUrlEncoded" class="def">fromFormUrlEncoded</a> :: [(Text, Text)] -&gt; <a href=""/>Either</a> <a href=""/>String</a> a</p></div><div class="subs instances"><p id="control.i:FromFormUrlEncoded" class="caption collapser" onclick="toggleSection('i:FromFormUrlEncoded')">Instances</p><div id="section.i:FromFormUrlEncoded" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:FromFormUrlEncoded">FromFormUrlEncoded</a> [(Text, Text)]</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:ToFormUrlEncoded" class="def">ToFormUrlEncoded</a> a <span class="keyword">where</span></p><div class="doc"><p>A type that can be converted to <code>application/x-www-form-urlencoded</code></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:toFormUrlEncoded" class="def">toFormUrlEncoded</a> :: a -&gt; [(Text, Text)]</p></div><div class="subs instances"><p id="control.i:ToFormUrlEncoded" class="caption collapser" onclick="toggleSection('i:ToFormUrlEncoded')">Instances</p><div id="section.i:ToFormUrlEncoded" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-API-ContentTypes.html#t:ToFormUrlEncoded">ToFormUrlEncoded</a> [(Text, Text)]</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a name="t:IsNonEmpty" class="def">IsNonEmpty</a> list :: <a href=""/>Constraint</a></p><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-ContentTypes.html#t:IsNonEmpty">IsNonEmpty</a> (x : xs) = ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a name="v:eitherDecodeLenient" class="def">eitherDecodeLenient</a> :: FromJSON a =&gt; <a href=""/>ByteString</a> -&gt; <a href=""/>Either</a> <a href=""/>String</a> a</p><div class="doc"><p>Like <code><a href="Data-Aeson.html#v:eitherDecode">eitherDecode</a></code> but allows all JSON values instead of just
 objects and arrays.</p><p>Will handle trailing whitespace, but not trailing junk. ie.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>eitherDecodeLenient &quot;1 &quot; :: Either String Int
</code></strong>Right 1
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>eitherDecodeLenient &quot;1 junk&quot; :: Either String Int
</code></strong>Left &quot;trailing junk after valid JSON: endOfInput&quot;
</pre></div></div><div class="top"><p class="src"><a name="v:canHandleAcceptH" class="def">canHandleAcceptH</a> :: <a href="Servant-API-ContentTypes.html#t:AllMime">AllMime</a> list =&gt; <a href=""/>Proxy</a> list -&gt; <a href="Servant-API-ContentTypes.html#t:AcceptHeader">AcceptHeader</a> -&gt; <a href=""/>Bool</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>