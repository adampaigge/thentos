<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Servant.Server</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Servant-Server.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">servant-server-0.5: A family of combinators for defining webservices APIs and serving them</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Servant.Server</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Run a wai application from an API</a></li><li><a href="#g:2">Construct a wai Application from an API</a></li><li><a href="#g:3">Handlers for all standard combinators</a></li><li><a href="#g:4">Enter</a><ul><li><a href="#g:5">Basic functions and datatypes</a></li><li><a href="#g:6"><code>Nat</code> utilities</a></li><li><a href="#g:7">Functions based on mmorph</a></li></ul></li><li><a href="#g:8">Default error type</a><ul><li><a href="#g:9">3XX</a></li><li><a href="#g:10">4XX</a></li></ul></li><li><a href="#g:11">5XX</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module lets you implement <code><a href="Servant-Server.html#t:Server">Server</a></code>s for defined APIs. You'll
 most likely just need <code><a href="Servant-Server.html#v:serve">serve</a></code>.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:serve">serve</a> :: <a href="Servant-Server.html#t:HasServer">HasServer</a> layout =&gt; <a href="Servant.html#t:Proxy">Proxy</a> layout -&gt; <a href="Servant-Server.html#t:Server">Server</a> layout -&gt; Application</li><li class="src short"><a href="#v:toApplication">toApplication</a> :: <a href="Servant-Server-Internal-RoutingApplication.html#t:RoutingApplication">RoutingApplication</a> -&gt; Application</li><li class="src short"><span class="keyword">class</span> <a href="#t:HasServer">HasServer</a> layout <span class="keyword">where</span><ul class="subs"><li><span class="keyword">type</span> <a href="#t:ServerT">ServerT</a> layout m :: *</li><li><a href="#v:route">route</a> :: <a href="Servant.html#t:Proxy">Proxy</a> layout -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:Delayed">Delayed</a> (<a href="Servant-Server.html#t:Server">Server</a> layout) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:Server">Server</a> layout = <a href="Servant-Server.html#t:ServerT">ServerT</a> layout (<a href=""/>ExceptT</a> <a href="Servant-Server.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a>)</li><li class="src short"><a href="#v:enter">enter</a> :: <a href="Servant-Server-Internal-Enter.html#t:Enter">Enter</a> typ arg ret =&gt; arg -&gt; typ -&gt; ret</li><li class="src short"><span class="keyword">newtype</span> m <a href="#t::-126--62-">:~&gt;</a> n = <a href="#v:Nat">Nat</a> {<ul class="subs"><li><a href="#v:unNat">unNat</a> :: <span class="keyword">forall</span> a. m a -&gt; n a</li></ul>}</li><li class="src short"><a href="#v:liftNat">liftNat</a> :: (<a href=""/>MonadTrans</a> t, <a href=""/>Monad</a> m) =&gt; m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> t m</li><li class="src short"><a href="#v:runReaderTNat">runReaderTNat</a> :: r -&gt; <a href=""/>ReaderT</a> r m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</li><li class="src short"><a href="#v:evalStateTLNat">evalStateTLNat</a> :: <a href=""/>Monad</a> m =&gt; s -&gt; <a href=""/>StateT</a> s m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</li><li class="src short"><a href="#v:evalStateTSNat">evalStateTSNat</a> :: <a href=""/>Monad</a> m =&gt; s -&gt; <a href=""/>StateT</a> s m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</li><li class="src short"><a href="#v:logWriterTLNat">logWriterTLNat</a> :: <a href=""/>MonadIO</a> m =&gt; (w -&gt; <a href=""/>IO</a> ()) -&gt; <a href=""/>WriterT</a> w m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</li><li class="src short"><a href="#v:logWriterTSNat">logWriterTSNat</a> :: <a href=""/>MonadIO</a> m =&gt; (w -&gt; <a href=""/>IO</a> ()) -&gt; <a href=""/>WriterT</a> w m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</li><li class="src short"><a href="#v:hoistNat">hoistNat</a> :: (MFunctor t, <a href=""/>Monad</a> m) =&gt; (m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> n) -&gt; t m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> t n</li><li class="src short"><a href="#v:embedNat">embedNat</a> :: (MMonad t, <a href=""/>Monad</a> n) =&gt; (m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> t n) -&gt; t m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> t n</li><li class="src short"><a href="#v:squashNat">squashNat</a> :: (<a href=""/>Monad</a> m, MMonad t) =&gt; t (t m) <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> t m</li><li class="src short"><a href="#v:generalizeNat">generalizeNat</a> :: <a href=""/>Applicative</a> m =&gt; <a href=""/>Identity</a> <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</li><li class="src short"><a href="#v:tweakResponse">tweakResponse</a> :: (<a href="Servant-Server-Internal-RoutingApplication.html#t:RouteResult">RouteResult</a> Response -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:RouteResult">RouteResult</a> Response) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a> -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ServantErr">ServantErr</a> = <a href="#v:ServantErr">ServantErr</a> {<ul class="subs"><li><a href="#v:errHTTPCode">errHTTPCode</a> :: <a href=""/>Int</a></li><li><a href="#v:errReasonPhrase">errReasonPhrase</a> :: <a href=""/>String</a></li><li><a href="#v:errBody">errBody</a> :: <a href=""/>ByteString</a></li><li><a href="#v:errHeaders">errHeaders</a> :: [Header]</li></ul>}</li><li class="src short"><a href="#v:err300">err300</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err301">err301</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err302">err302</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err303">err303</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err304">err304</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err305">err305</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err307">err307</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err400">err400</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err401">err401</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err402">err402</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err403">err403</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err404">err404</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err405">err405</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err406">err406</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err407">err407</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err409">err409</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err410">err410</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err411">err411</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err412">err412</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err413">err413</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err414">err414</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err415">err415</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err416">err416</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err417">err417</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err500">err500</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err501">err501</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err502">err502</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err503">err503</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err504">err504</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li><li class="src short"><a href="#v:err505">err505</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></li></ul></div><div id="interface"><h1 id="g:1">Run a wai application from an API</h1><div class="top"><p class="src"><a name="v:serve" class="def">serve</a> :: <a href="Servant-Server.html#t:HasServer">HasServer</a> layout =&gt; <a href="Servant.html#t:Proxy">Proxy</a> layout -&gt; <a href="Servant-Server.html#t:Server">Server</a> layout -&gt; Application</p><div class="doc"><p><code><a href="Servant-Server.html#v:serve">serve</a></code> allows you to implement an API and produce a wai <code>Application</code>.</p><p>Example:</p><pre>type MyApi = &quot;books&quot; :&gt; Get '[JSON] [Book] -- GET /books
        :&lt;|&gt; &quot;books&quot; :&gt; ReqBody Book :&gt; Post '[JSON] Book -- POST /books

server :: Server MyApi
server = listAllBooks :&lt;|&gt; postBook
  where listAllBooks = ...
        postBook book = ...

myApi :: Proxy MyApi
myApi = Proxy

app :: Application
app = serve myApi server

main :: IO ()
main = Network.Wai.Handler.Warp.run 8080 app</pre></div></div><h1 id="g:2">Construct a wai Application from an API</h1><div class="top"><p class="src"><a name="v:toApplication" class="def">toApplication</a> :: <a href="Servant-Server-Internal-RoutingApplication.html#t:RoutingApplication">RoutingApplication</a> -&gt; Application</p></div><h1 id="g:3">Handlers for all standard combinators</h1><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:HasServer" class="def">HasServer</a> layout <span class="keyword">where</span></p><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a name="t:ServerT" class="def">ServerT</a> layout m :: *</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:route" class="def">route</a> :: <a href="Servant.html#t:Proxy">Proxy</a> layout -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:Delayed">Delayed</a> (<a href="Servant-Server.html#t:Server">Server</a> layout) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></p></div><div class="subs instances"><p id="control.i:HasServer" class="caption collapser" onclick="toggleSection('i:HasServer')">Instances</p><div id="section.i:HasServer" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server.html#t:HasServer">HasServer</a> * <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Raw.html#t:Raw">Raw</a></span></td><td class="doc"><p>Just pass the request to the underlying application and serve its response.</p><p>Example:</p><pre>type MyApi = &quot;images&quot; :&gt; Raw

server :: Server MyApi
server = serveDirectory &quot;/var/www/images&quot;</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Servant-Server.html#t:HasServer">HasServer</a> * a, <a href="Servant-Server.html#t:HasServer">HasServer</a> * b) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Alternative.html#t::-60--124--62-">(:&lt;|&gt;)</a> a b)</span></td><td class="doc"><p>A server for <code>a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Alternative.html#t::-60--124--62-">:&lt;|&gt;</a></code> b</code> first tries to match the request against the route
   represented by <code>a</code> and if it fails tries <code>b</code>. You must provide a request
   handler for each route.</p><pre>type MyApi = &quot;books&quot; :&gt; Get '[JSON] [Book] -- GET /books
        :&lt;|&gt; &quot;books&quot; :&gt; ReqBody Book :&gt; Post '[JSON] Book -- POST /books

server :: Server MyApi
server = listAllBooks :&lt;|&gt; postBook
  where listAllBooks = ...
        postBook book = ...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#t:Get">Get</a> ctypes (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#t:Get">Get</a> ctypes ())</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#t:Get">Get</a> ctypes a)</span></td><td class="doc"><p>When implementing the handler for a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#t:Get">Get</a></code> endpoint,
 just like for <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#v:Delete">Delete</a></code>, <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#v:Post">Post</a></code>
 and <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#v:Put">Put</a></code>, the handler code runs in the
 <code>ExceptT ServantErr IO</code> monad, where the <code><a href=""/>Int</a></code> represents
 the status code and the <code><a href=""/>String</a></code> a message, returned in case of
 failure. You can quite handily use <code><a href=""/>throwE</a></code>
 to quickly fail if some conditions are not met.</p><p>If successfully returning a value, we use the type-level list, combined
 with the request's <code>Accept</code> header, to encode the value for you
 (returning a status code of 200). If there was no <code>Accept</code> header or it
 was <code>*/*</code>, we return encode using the first <code>Content-Type</code> type on the
 list.</p></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#t:Post">Post</a> ctypes (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#t:Post">Post</a> ctypes ())</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#t:Post">Post</a> ctypes a)</span></td><td class="doc"><p>When implementing the handler for a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#t:Post">Post</a></code> endpoint,
 just like for <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#v:Delete">Delete</a></code>, <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#v:Get">Get</a></code>
 and <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#v:Put">Put</a></code>, the handler code runs in the
 <code>ExceptT ServantErr IO</code> monad, where the <code><a href=""/>Int</a></code> represents
 the status code and the <code><a href=""/>String</a></code> a message, returned in case of
 failure. You can quite handily use <code><a href=""/>throwE</a></code>
 to quickly fail if some conditions are not met.</p><p>If successfully returning a value, we use the type-level list, combined
 with the request's <code>Accept</code> header, to encode the value for you
 (returning a status code of 201). If there was no <code>Accept</code> header or it
 was <code>*/*</code>, we return encode using the first <code>Content-Type</code> type on the
 list.</p></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#t:Delete">Delete</a> ctypes (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#t:Delete">Delete</a> ctypes ())</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#t:Delete">Delete</a> ctypes a)</span></td><td class="doc"><p>If you have a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#t:Delete">Delete</a></code> endpoint in your API,
 the handler for this endpoint is meant to delete
 a resource.</p><p>The code of the handler will, just like
 for <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#v:Get">Get</a></code>, <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#v:Post">Post</a></code> and
 <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#v:Put">Put</a></code>, run in <code>ExceptT ServantErr IO ()</code>.
 The <code><a href=""/>Int</a></code> represents the status code and the <code><a href=""/>String</a></code> a message
 to be returned. You can use <code><a href=""/>throwE</a></code> to
 painlessly error out if the conditions for a successful deletion
 are not met.</p></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#t:Put">Put</a> ctypes (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#t:Put">Put</a> ctypes ())</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#t:Put">Put</a> ctypes a)</span></td><td class="doc"><p>When implementing the handler for a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#t:Put">Put</a></code> endpoint,
 just like for <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#v:Delete">Delete</a></code>, <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#v:Get">Get</a></code>
 and <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#v:Post">Post</a></code>, the handler code runs in the
 <code>ExceptT ServantErr IO</code> monad, where the <code><a href=""/>Int</a></code> represents
 the status code and the <code><a href=""/>String</a></code> a message, returned in case of
 failure. You can quite handily use <code><a href=""/>throwE</a></code>
 to quickly fail if some conditions are not met.</p><p>If successfully returning a value, we use the type-level list, combined
 with the request's <code>Accept</code> header, to encode the value for you
 (returning a status code of 200). If there was no <code>Accept</code> header or it
 was <code>*/*</code>, we return encode using the first <code>Content-Type</code> type on the
 list.</p></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Patch.html#t:Patch">Patch</a> ctypes (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Patch.html#t:Patch">Patch</a> ctypes ())</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Patch.html#t:Patch">Patch</a> ctypes a)</span></td><td class="doc"><p>When implementing the handler for a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Patch.html#t:Patch">Patch</a></code> endpoint,
 just like for <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#v:Delete">Delete</a></code>, <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#v:Get">Get</a></code>
 and <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#v:Put">Put</a></code>, the handler code runs in the
 <code>ExceptT ServantErr IO</code> monad, where the <code><a href=""/>Int</a></code> represents
 the status code and the <code><a href=""/>String</a></code> a message, returned in case of
 failure. You can quite handily use <code><a href=""/>throwE</a></code>
 to quickly fail if some conditions are not met.</p><p>If successfully returning a value, we just require that its type has
 a <code>ToJSON</code> instance and servant takes care of encoding it for you,
 yielding status code 200 along the way.</p></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server.html#t:HasServer">HasServer</a> k api =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-HttpVersion.html#t:HttpVersion">HttpVersion</a> api)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server.html#t:HasServer">HasServer</a> k api =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Vault.html#t:Vault">Vault</a> api)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server.html#t:HasServer">HasServer</a> k api =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-IsSecure.html#t:IsSecure">IsSecure</a> api)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server.html#t:HasServer">HasServer</a> k api =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-RemoteHost.html#t:RemoteHost">RemoteHost</a> api)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTUnrender">AllCTUnrender</a> list a, <a href="Servant-Server.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ReqBody.html#t:ReqBody">ReqBody</a> * list a) sublayout)</span></td><td class="doc"><p>If you use <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ReqBody.html#t:ReqBody">ReqBody</a></code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of the type specified by <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ReqBody.html#t:ReqBody">ReqBody</a></code>.
 The <code>Content-Type</code> header is inspected, and the list provided is used to
 attempt deserialization. If the request does not have a <code>Content-Type</code>
 header, it is treated as <code>application/octet-stream</code> (as specified in
 <a href="http://tools.ietf.org/html/rfc7231#section-3.1.1.5">RFC7231</a>.
 This lets servant worry about extracting it from the request and turning
 it into a value of the type you specify.</p><p>All it asks is for a <code>FromJSON</code> instance.</p><p>Example:</p><pre>type MyApi = &quot;books&quot; :&gt; ReqBody '[JSON] Book :&gt; Post '[JSON] Book

server :: Server MyApi
server = postBook
  where postBook :: Book -&gt; ExceptT ServantErr IO Book
        postBook book = ...insert into your db...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> sym, <a href="Servant-Server.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryFlag">QueryFlag</a> sym) sublayout)</span></td><td class="doc"><p>If you use <code><code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryFlag">QueryFlag</a></code> &quot;published&quot;</code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of type <code><a href=""/>Bool</a></code>.</p><p>Example:</p><pre>type MyApi = &quot;books&quot; :&gt; QueryFlag &quot;published&quot; :&gt; Get '[JSON] [Book]

server :: Server MyApi
server = getBooks
  where getBooks :: Bool -&gt; ExceptT ServantErr IO [Book]
        getBooks onlyPublished = ...return all books, or only the ones that are already published, depending on the argument...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> sym, FromHttpApiData a, <a href="Servant-Server.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryParams">QueryParams</a> * sym a) sublayout)</span></td><td class="doc"><p>If you use <code><code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryParams">QueryParams</a></code> &quot;authors&quot; Text</code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of type <code>[<code>Text</code>]</code>.</p><p>This lets servant worry about looking up 0 or more values in the query string
 associated to <code>authors</code> and turning each of them into a value of
 the type you specify.</p><p>You can control how the individual values are converted from <code>Text</code> to your type
 by simply providing an instance of <code>FromHttpApiData</code> for your type.</p><p>Example:</p><pre>type MyApi = &quot;books&quot; :&gt; QueryParams &quot;authors&quot; Text :&gt; Get '[JSON] [Book]

server :: Server MyApi
server = getBooksBy
  where getBooksBy :: [Text] -&gt; ExceptT ServantErr IO [Book]
        getBooksBy authors = ...return all books by these authors...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> sym, FromHttpApiData a, <a href="Servant-Server.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryParam">QueryParam</a> * sym a) sublayout)</span></td><td class="doc"><p>If you use <code><code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryParam">QueryParam</a></code> &quot;author&quot; Text</code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of type <code><code><a href=""/>Maybe</a></code> <code>Text</code></code>.</p><p>This lets servant worry about looking it up in the query string
 and turning it into a value of the type you specify, enclosed
 in <code><a href=""/>Maybe</a></code>, because it may not be there and servant would then
 hand you <code><a href=""/>Nothing</a></code>.</p><p>You can control how it'll be converted from <code>Text</code> to your type
 by simply providing an instance of <code>FromHttpApiData</code> for your type.</p><p>Example:</p><pre>type MyApi = &quot;books&quot; :&gt; QueryParam &quot;author&quot; Text :&gt; Get '[JSON] [Book]

server :: Server MyApi
server = getBooksBy
  where getBooksBy :: Maybe Text -&gt; ExceptT ServantErr IO [Book]
        getBooksBy Nothing       = ...return all books...
        getBooksBy (Just author) = ...return books by the given author...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> sym, FromHttpApiData a, <a href="Servant-Server.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Header.html#t:Header">Header</a> sym a) sublayout)</span></td><td class="doc"><p>If you use <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Header.html#t:Header">Header</a></code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of the type specified by <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Header.html#t:Header">Header</a></code>.
 This lets servant worry about extracting it from the request and turning
 it into a value of the type you specify.</p><p>All it asks is for a <code>FromHttpApiData</code> instance.</p><p>Example:</p><pre>newtype Referer = Referer Text
  deriving (Eq, Show, FromHttpApiData, ToText)

           -- GET /view-my-referer
type MyApi = &quot;view-my-referer&quot; :&gt; Header &quot;Referer&quot; Referer :&gt; Get '[JSON] Referer

server :: Server MyApi
server = viewReferer
  where viewReferer :: Referer -&gt; ExceptT ServantErr IO referer
        viewReferer referer = return referer</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> capture, FromHttpApiData a, <a href="Servant-Server.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Capture.html#t:Capture">Capture</a> * capture a) sublayout)</span></td><td class="doc"><p>If you use <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Capture.html#t:Capture">Capture</a></code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of the type specified by the <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Capture.html#t:Capture">Capture</a></code>.
 This lets servant worry about getting it from the URL and turning
 it into a value of the type you specify.</p><p>You can control how it'll be converted from <code>Text</code> to your type
 by simply providing an instance of <code>FromHttpApiData</code> for your type.</p><p>Example:</p><pre>type MyApi = &quot;books&quot; :&gt; Capture &quot;isbn&quot; Text :&gt; Get '[JSON] Book

server :: Server MyApi
server = getBook
  where getBook :: Text -&gt; ExceptT ServantErr IO Book
        getBook isbn = ...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> path, <a href="Servant-Server.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> <a href=""/>Symbol</a> k path sublayout)</span></td><td class="doc"><p>Make sure the incoming request starts with <code>&quot;/path&quot;</code>, strip it and
 pass the rest of the request path to <code>sublayout</code>.</p></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Server" class="def">Server</a> layout = <a href="Servant-Server.html#t:ServerT">ServerT</a> layout (<a href=""/>ExceptT</a> <a href="Servant-Server.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a>)</p></div><h1 id="g:4">Enter</h1><div class="doc"><p>Sometimes our cherished <code>ExceptT</code> monad isn't quite the type you'd like for
 your handlers. Maybe you want to thread some configuration in a <code>Reader</code>
 monad. Or have your types ensure that your handlers don't do any IO. Enter
 <code><a href="Servant-Server.html#v:enter">enter</a></code>.</p><p>With <code><a href="Servant-Server.html#v:enter">enter</a></code>, you can provide a function, wrapped in the `(:~&gt;)` / <code><a href="Servant-Server.html#v:Nat">Nat</a></code>
 newtype, to convert any number of endpoints from one type constructor to
 another. For example</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Control.Monad.Reader
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Control.Category as C
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>type ReaderAPI = &quot;ep1&quot; :&gt; Get '[JSON] Int :&lt;|&gt; &quot;ep2&quot; :&gt; Get '[JSON] String
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let readerServer = return 1797 :&lt;|&gt; ask :: ServerT ReaderAPI (Reader String)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let mainServer = enter (generalizeNat C.. (runReaderTNat &quot;hi&quot;)) readerServer :: Server ReaderAPI
</code></strong></pre></div><h2 id="g:5">Basic functions and datatypes</h2><div class="top"><p class="src"><a name="v:enter" class="def">enter</a> :: <a href="Servant-Server-Internal-Enter.html#t:Enter">Enter</a> typ arg ret =&gt; arg -&gt; typ -&gt; ret</p></div><div class="top"><p class="src"><span class="keyword">newtype</span> m <a name="t::-126--62-" class="def">:~&gt;</a> n</p><div class="doc"><p>A natural transformation from <code>m</code> to <code>n</code>. Used to <code><a href="Servant-Server.html#v:enter">enter</a></code> particular
 datatypes.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Nat" class="def">Nat</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:unNat" class="def">unNat</a> :: <span class="keyword">forall</span> a. m a -&gt; n a</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i::-126--62-" class="caption collapser" onclick="toggleSection('i::-126--62-')">Instances</p><div id="section.i::-126--62-" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server-Internal-Enter.html#t:Enter">Enter</a> (m a) (<a href="Servant-Server.html#t::-126--62-">(:~&gt;)</a> m n) (n a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Category</a> (* -&gt; *) <a href="Servant-Server.html#t::-126--62-">(:~&gt;)</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h2 id="g:6"><code><a href="Servant-Server.html#v:Nat">Nat</a></code> utilities</h2><div class="top"><p class="src"><a name="v:liftNat" class="def">liftNat</a> :: (<a href=""/>MonadTrans</a> t, <a href=""/>Monad</a> m) =&gt; m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> t m</p><div class="doc"><p>Like <code><a href=""/>lift</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:runReaderTNat" class="def">runReaderTNat</a> :: r -&gt; <a href=""/>ReaderT</a> r m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</p></div><div class="top"><p class="src"><a name="v:evalStateTLNat" class="def">evalStateTLNat</a> :: <a href=""/>Monad</a> m =&gt; s -&gt; <a href=""/>StateT</a> s m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</p></div><div class="top"><p class="src"><a name="v:evalStateTSNat" class="def">evalStateTSNat</a> :: <a href=""/>Monad</a> m =&gt; s -&gt; <a href=""/>StateT</a> s m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</p></div><div class="top"><p class="src"><a name="v:logWriterTLNat" class="def">logWriterTLNat</a> :: <a href=""/>MonadIO</a> m =&gt; (w -&gt; <a href=""/>IO</a> ()) -&gt; <a href=""/>WriterT</a> w m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</p><div class="doc"><p>Like <code><a href="Servant-Server.html#v:logWriterTSNat">logWriterTSNat</a></code>, but for strict <code>WriterT</code>.</p></div></div><div class="top"><p class="src"><a name="v:logWriterTSNat" class="def">logWriterTSNat</a> :: <a href=""/>MonadIO</a> m =&gt; (w -&gt; <a href=""/>IO</a> ()) -&gt; <a href=""/>WriterT</a> w m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</p><div class="doc"><p>Log the contents of <code><a href=""/>WriterT</a></code> with the function provided as the
 first argument, and return the value of the <code>WriterT</code> computation</p></div></div><h2 id="g:7">Functions based on <a href="https://hackage.haskell.org/package/mmorph">mmorph</a></h2><div class="top"><p class="src"><a name="v:hoistNat" class="def">hoistNat</a> :: (MFunctor t, <a href=""/>Monad</a> m) =&gt; (m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> n) -&gt; t m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> t n</p><div class="doc"><p>Like <code>mmorph</code>'s <code>hoist</code>.</p></div></div><div class="top"><p class="src"><a name="v:embedNat" class="def">embedNat</a> :: (MMonad t, <a href=""/>Monad</a> n) =&gt; (m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> t n) -&gt; t m <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> t n</p><div class="doc"><p>Like <code>mmorph</code>'s <code>embed</code>.</p></div></div><div class="top"><p class="src"><a name="v:squashNat" class="def">squashNat</a> :: (<a href=""/>Monad</a> m, MMonad t) =&gt; t (t m) <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> t m</p><div class="doc"><p>Like <code>mmorph</code>'s <code>squash</code>.</p></div></div><div class="top"><p class="src"><a name="v:generalizeNat" class="def">generalizeNat</a> :: <a href=""/>Applicative</a> m =&gt; <a href=""/>Identity</a> <a href="Servant-Server.html#t::-126--62-">:~&gt;</a> m</p><div class="doc"><p>Like <code>mmorph</code>'s <code>generalize</code>.</p></div></div><div class="top"><p class="src"><a name="v:tweakResponse" class="def">tweakResponse</a> :: (<a href="Servant-Server-Internal-RoutingApplication.html#t:RouteResult">RouteResult</a> Response -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:RouteResult">RouteResult</a> Response) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a> -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></p><div class="doc"><p>Apply a transformation to the response of a <code><a href="Servant-Server-Internal-Router.html#t:Router">Router</a></code>.</p></div></div><h1 id="g:8">Default error type</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ServantErr" class="def">ServantErr</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ServantErr" class="def">ServantErr</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:errHTTPCode" class="def">errHTTPCode</a> :: <a href=""/>Int</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:errReasonPhrase" class="def">errReasonPhrase</a> :: <a href=""/>String</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:errBody" class="def">errBody</a> :: <a href=""/>ByteString</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:errHeaders" class="def">errHeaders</a> :: [Header]</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:ServantErr" class="caption collapser" onclick="toggleSection('i:ServantErr')">Instances</p><div id="section.i:ServantErr" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Eq</a> <a href="Servant-Server.html#t:ServantErr">ServantErr</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Read</a> <a href="Servant-Server.html#t:ServantErr">ServantErr</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href=""/>Show</a> <a href="Servant-Server.html#t:ServantErr">ServantErr</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h2 id="g:9">3XX</h2><div class="top"><p class="src"><a name="v:err300" class="def">err300</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err301" class="def">err301</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err302" class="def">err302</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err303" class="def">err303</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err304" class="def">err304</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err305" class="def">err305</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err307" class="def">err307</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><h2 id="g:10">4XX</h2><div class="top"><p class="src"><a name="v:err400" class="def">err400</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err401" class="def">err401</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err402" class="def">err402</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err403" class="def">err403</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err404" class="def">err404</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err405" class="def">err405</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err406" class="def">err406</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err407" class="def">err407</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err409" class="def">err409</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err410" class="def">err410</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err411" class="def">err411</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err412" class="def">err412</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err413" class="def">err413</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err414" class="def">err414</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err415" class="def">err415</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err416" class="def">err416</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err417" class="def">err417</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><h1 id="g:11">5XX</h1><div class="top"><p class="src"><a name="v:err500" class="def">err500</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err501" class="def">err501</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err502" class="def">err502</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err503" class="def">err503</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err504" class="def">err504</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div><div class="top"><p class="src"><a name="v:err505" class="def">err505</a> :: <a href="Servant-Server.html#t:ServantErr">ServantErr</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>