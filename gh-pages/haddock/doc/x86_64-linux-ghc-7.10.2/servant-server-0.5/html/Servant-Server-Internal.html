<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Servant.Server.Internal</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Servant-Server-Internal.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">servant-server-0.5: A family of combinators for defining webservices APIs and serving them</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Servant.Server.Internal</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Instances</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> <a href="#t:HasServer">HasServer</a> layout <span class="keyword">where</span><ul class="subs"><li><span class="keyword">type</span> <a href="#t:ServerT">ServerT</a> layout m :: *</li><li><a href="#v:route">route</a> :: <a href="Servant.html#t:Proxy">Proxy</a> layout -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:Delayed">Delayed</a> (<a href="Servant-Server-Internal.html#t:Server">Server</a> layout) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:Server">Server</a> layout = <a href="Servant-Server-Internal.html#t:ServerT">ServerT</a> layout (<a href=""/>ExceptT</a> <a href="Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a>)</li><li class="src short"><a href="#v:captured">captured</a> :: FromHttpApiData a =&gt; proxy (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Capture.html#t:Capture">Capture</a> sym a) -&gt; Text -&gt; <a href=""/>Maybe</a> a</li><li class="src short"><a href="#v:allowedMethodHead">allowedMethodHead</a> :: Method -&gt; Request -&gt; <a href=""/>Bool</a></li><li class="src short"><a href="#v:allowedMethod">allowedMethod</a> :: Method -&gt; Request -&gt; <a href=""/>Bool</a></li><li class="src short"><a href="#v:processMethodRouter">processMethodRouter</a> :: <span class="keyword">forall</span> a. ConvertibleStrings a <a href=""/>ByteString</a> =&gt; <a href=""/>Maybe</a> (a, <a href=""/>ByteString</a>) -&gt; Status -&gt; Method -&gt; <a href=""/>Maybe</a> [(HeaderName, <a href=""/>ByteString</a>)] -&gt; Request -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:RouteResult">RouteResult</a> Response</li><li class="src short"><a href="#v:methodCheck">methodCheck</a> :: Method -&gt; Request -&gt; <a href=""/>IO</a> (<a href="Servant-Server-Internal-RoutingApplication.html#t:RouteResult">RouteResult</a> ())</li><li class="src short"><a href="#v:acceptCheck">acceptCheck</a> :: <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllMime">AllMime</a> list =&gt; <a href="Servant.html#t:Proxy">Proxy</a> list -&gt; <a href=""/>ByteString</a> -&gt; <a href=""/>IO</a> (<a href="Servant-Server-Internal-RoutingApplication.html#t:RouteResult">RouteResult</a> ())</li><li class="src short"><a href="#v:methodRouter">methodRouter</a> :: <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; Method -&gt; <a href="Servant.html#t:Proxy">Proxy</a> ctypes -&gt; Status -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:Delayed">Delayed</a> (<a href=""/>ExceptT</a> <a href="Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a> a) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></li><li class="src short"><a href="#v:methodRouterHeaders">methodRouterHeaders</a> :: (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; Method -&gt; <a href="Servant.html#t:Proxy">Proxy</a> ctypes -&gt; Status -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:Delayed">Delayed</a> (<a href=""/>ExceptT</a> <a href="Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v)) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></li><li class="src short"><a href="#v:methodRouterEmpty">methodRouterEmpty</a> :: Method -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:Delayed">Delayed</a> (<a href=""/>ExceptT</a> <a href="Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a> ()) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></li><li class="src short"><a href="#v:pathIsEmpty">pathIsEmpty</a> :: Request -&gt; <a href=""/>Bool</a></li><li class="src short"><a href="#v:ct_wildcard">ct_wildcard</a> :: <a href=""/>ByteString</a></li><li class="src short">module <a href="Servant-Server-Internal-Router.html">Servant.Server.Internal.Router</a></li><li class="src short">module <a href="Servant-Server-Internal-RoutingApplication.html">Servant.Server.Internal.RoutingApplication</a></li><li class="src short">module <a href="Servant-Server-Internal-ServantErr.html">Servant.Server.Internal.ServantErr</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:HasServer" class="def">HasServer</a> layout <span class="keyword">where</span></p><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a name="t:ServerT" class="def">ServerT</a> layout m :: *</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:route" class="def">route</a> :: <a href="Servant.html#t:Proxy">Proxy</a> layout -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:Delayed">Delayed</a> (<a href="Servant-Server-Internal.html#t:Server">Server</a> layout) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></p></div><div class="subs instances"><p id="control.i:HasServer" class="caption collapser" onclick="toggleSection('i:HasServer')">Instances</p><div id="section.i:HasServer" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Raw.html#t:Raw">Raw</a></span></td><td class="doc"><p>Just pass the request to the underlying application and serve its response.</p><p>Example:</p><pre>type MyApi = &quot;images&quot; :&gt; Raw

server :: Server MyApi
server = serveDirectory &quot;/var/www/images&quot;</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * a, <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * b) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Alternative.html#t::-60--124--62-">(:&lt;|&gt;)</a> a b)</span></td><td class="doc"><p>A server for <code>a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Alternative.html#t::-60--124--62-">:&lt;|&gt;</a></code> b</code> first tries to match the request against the route
   represented by <code>a</code> and if it fails tries <code>b</code>. You must provide a request
   handler for each route.</p><pre>type MyApi = &quot;books&quot; :&gt; Get '[JSON] [Book] -- GET /books
        :&lt;|&gt; &quot;books&quot; :&gt; ReqBody Book :&gt; Post '[JSON] Book -- POST /books

server :: Server MyApi
server = listAllBooks :&lt;|&gt; postBook
  where listAllBooks = ...
        postBook book = ...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#t:Get">Get</a> ctypes (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#t:Get">Get</a> ctypes ())</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#t:Get">Get</a> ctypes a)</span></td><td class="doc"><p>When implementing the handler for a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#t:Get">Get</a></code> endpoint,
 just like for <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#v:Delete">Delete</a></code>, <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#v:Post">Post</a></code>
 and <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#v:Put">Put</a></code>, the handler code runs in the
 <code>ExceptT ServantErr IO</code> monad, where the <code><a href=""/>Int</a></code> represents
 the status code and the <code><a href=""/>String</a></code> a message, returned in case of
 failure. You can quite handily use <code><a href=""/>throwE</a></code>
 to quickly fail if some conditions are not met.</p><p>If successfully returning a value, we use the type-level list, combined
 with the request's <code>Accept</code> header, to encode the value for you
 (returning a status code of 200). If there was no <code>Accept</code> header or it
 was <code>*/*</code>, we return encode using the first <code>Content-Type</code> type on the
 list.</p></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#t:Post">Post</a> ctypes (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#t:Post">Post</a> ctypes ())</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#t:Post">Post</a> ctypes a)</span></td><td class="doc"><p>When implementing the handler for a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#t:Post">Post</a></code> endpoint,
 just like for <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#v:Delete">Delete</a></code>, <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#v:Get">Get</a></code>
 and <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#v:Put">Put</a></code>, the handler code runs in the
 <code>ExceptT ServantErr IO</code> monad, where the <code><a href=""/>Int</a></code> represents
 the status code and the <code><a href=""/>String</a></code> a message, returned in case of
 failure. You can quite handily use <code><a href=""/>throwE</a></code>
 to quickly fail if some conditions are not met.</p><p>If successfully returning a value, we use the type-level list, combined
 with the request's <code>Accept</code> header, to encode the value for you
 (returning a status code of 201). If there was no <code>Accept</code> header or it
 was <code>*/*</code>, we return encode using the first <code>Content-Type</code> type on the
 list.</p></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#t:Delete">Delete</a> ctypes (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#t:Delete">Delete</a> ctypes ())</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#t:Delete">Delete</a> ctypes a)</span></td><td class="doc"><p>If you have a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#t:Delete">Delete</a></code> endpoint in your API,
 the handler for this endpoint is meant to delete
 a resource.</p><p>The code of the handler will, just like
 for <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#v:Get">Get</a></code>, <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#v:Post">Post</a></code> and
 <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#v:Put">Put</a></code>, run in <code>ExceptT ServantErr IO ()</code>.
 The <code><a href=""/>Int</a></code> represents the status code and the <code><a href=""/>String</a></code> a message
 to be returned. You can use <code><a href=""/>throwE</a></code> to
 painlessly error out if the conditions for a successful deletion
 are not met.</p></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#t:Put">Put</a> ctypes (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#t:Put">Put</a> ctypes ())</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#t:Put">Put</a> ctypes a)</span></td><td class="doc"><p>When implementing the handler for a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#t:Put">Put</a></code> endpoint,
 just like for <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#v:Delete">Delete</a></code>, <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#v:Get">Get</a></code>
 and <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Post.html#v:Post">Post</a></code>, the handler code runs in the
 <code>ExceptT ServantErr IO</code> monad, where the <code><a href=""/>Int</a></code> represents
 the status code and the <code><a href=""/>String</a></code> a message, returned in case of
 failure. You can quite handily use <code><a href=""/>throwE</a></code>
 to quickly fail if some conditions are not met.</p><p>If successfully returning a value, we use the type-level list, combined
 with the request's <code>Accept</code> header, to encode the value for you
 (returning a status code of 200). If there was no <code>Accept</code> header or it
 was <code>*/*</code>, we return encode using the first <code>Content-Type</code> type on the
 list.</p></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Patch.html#t:Patch">Patch</a> ctypes (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Patch.html#t:Patch">Patch</a> ctypes ())</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Patch.html#t:Patch">Patch</a> ctypes a)</span></td><td class="doc"><p>When implementing the handler for a <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Patch.html#t:Patch">Patch</a></code> endpoint,
 just like for <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Delete.html#v:Delete">Delete</a></code>, <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Get.html#v:Get">Get</a></code>
 and <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Put.html#v:Put">Put</a></code>, the handler code runs in the
 <code>ExceptT ServantErr IO</code> monad, where the <code><a href=""/>Int</a></code> represents
 the status code and the <code><a href=""/>String</a></code> a message, returned in case of
 failure. You can quite handily use <code><a href=""/>throwE</a></code>
 to quickly fail if some conditions are not met.</p><p>If successfully returning a value, we just require that its type has
 a <code>ToJSON</code> instance and servant takes care of encoding it for you,
 yielding status code 200 along the way.</p></td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> k api =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-HttpVersion.html#t:HttpVersion">HttpVersion</a> api)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> k api =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Vault.html#t:Vault">Vault</a> api)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> k api =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-IsSecure.html#t:IsSecure">IsSecure</a> api)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> k api =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-RemoteHost.html#t:RemoteHost">RemoteHost</a> api)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTUnrender">AllCTUnrender</a> list a, <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ReqBody.html#t:ReqBody">ReqBody</a> * list a) sublayout)</span></td><td class="doc"><p>If you use <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ReqBody.html#t:ReqBody">ReqBody</a></code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of the type specified by <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ReqBody.html#t:ReqBody">ReqBody</a></code>.
 The <code>Content-Type</code> header is inspected, and the list provided is used to
 attempt deserialization. If the request does not have a <code>Content-Type</code>
 header, it is treated as <code>application/octet-stream</code> (as specified in
 <a href="http://tools.ietf.org/html/rfc7231#section-3.1.1.5">RFC7231</a>.
 This lets servant worry about extracting it from the request and turning
 it into a value of the type you specify.</p><p>All it asks is for a <code>FromJSON</code> instance.</p><p>Example:</p><pre>type MyApi = &quot;books&quot; :&gt; ReqBody '[JSON] Book :&gt; Post '[JSON] Book

server :: Server MyApi
server = postBook
  where postBook :: Book -&gt; ExceptT ServantErr IO Book
        postBook book = ...insert into your db...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> sym, <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryFlag">QueryFlag</a> sym) sublayout)</span></td><td class="doc"><p>If you use <code><code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryFlag">QueryFlag</a></code> &quot;published&quot;</code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of type <code><a href=""/>Bool</a></code>.</p><p>Example:</p><pre>type MyApi = &quot;books&quot; :&gt; QueryFlag &quot;published&quot; :&gt; Get '[JSON] [Book]

server :: Server MyApi
server = getBooks
  where getBooks :: Bool -&gt; ExceptT ServantErr IO [Book]
        getBooks onlyPublished = ...return all books, or only the ones that are already published, depending on the argument...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> sym, FromHttpApiData a, <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryParams">QueryParams</a> * sym a) sublayout)</span></td><td class="doc"><p>If you use <code><code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryParams">QueryParams</a></code> &quot;authors&quot; Text</code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of type <code>[<code>Text</code>]</code>.</p><p>This lets servant worry about looking up 0 or more values in the query string
 associated to <code>authors</code> and turning each of them into a value of
 the type you specify.</p><p>You can control how the individual values are converted from <code>Text</code> to your type
 by simply providing an instance of <code>FromHttpApiData</code> for your type.</p><p>Example:</p><pre>type MyApi = &quot;books&quot; :&gt; QueryParams &quot;authors&quot; Text :&gt; Get '[JSON] [Book]

server :: Server MyApi
server = getBooksBy
  where getBooksBy :: [Text] -&gt; ExceptT ServantErr IO [Book]
        getBooksBy authors = ...return all books by these authors...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> sym, FromHttpApiData a, <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryParam">QueryParam</a> * sym a) sublayout)</span></td><td class="doc"><p>If you use <code><code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-QueryParam.html#t:QueryParam">QueryParam</a></code> &quot;author&quot; Text</code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of type <code><code><a href=""/>Maybe</a></code> <code>Text</code></code>.</p><p>This lets servant worry about looking it up in the query string
 and turning it into a value of the type you specify, enclosed
 in <code><a href=""/>Maybe</a></code>, because it may not be there and servant would then
 hand you <code><a href=""/>Nothing</a></code>.</p><p>You can control how it'll be converted from <code>Text</code> to your type
 by simply providing an instance of <code>FromHttpApiData</code> for your type.</p><p>Example:</p><pre>type MyApi = &quot;books&quot; :&gt; QueryParam &quot;author&quot; Text :&gt; Get '[JSON] [Book]

server :: Server MyApi
server = getBooksBy
  where getBooksBy :: Maybe Text -&gt; ExceptT ServantErr IO [Book]
        getBooksBy Nothing       = ...return all books...
        getBooksBy (Just author) = ...return books by the given author...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> sym, FromHttpApiData a, <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Header.html#t:Header">Header</a> sym a) sublayout)</span></td><td class="doc"><p>If you use <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Header.html#t:Header">Header</a></code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of the type specified by <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Header.html#t:Header">Header</a></code>.
 This lets servant worry about extracting it from the request and turning
 it into a value of the type you specify.</p><p>All it asks is for a <code>FromHttpApiData</code> instance.</p><p>Example:</p><pre>newtype Referer = Referer Text
  deriving (Eq, Show, FromHttpApiData, ToText)

           -- GET /view-my-referer
type MyApi = &quot;view-my-referer&quot; :&gt; Header &quot;Referer&quot; Referer :&gt; Get '[JSON] Referer

server :: Server MyApi
server = viewReferer
  where viewReferer :: Referer -&gt; ExceptT ServantErr IO referer
        viewReferer referer = return referer</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> capture, FromHttpApiData a, <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> * k (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Capture.html#t:Capture">Capture</a> * capture a) sublayout)</span></td><td class="doc"><p>If you use <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Capture.html#t:Capture">Capture</a></code> in one of the endpoints for your API,
 this automatically requires your server-side handler to be a function
 that takes an argument of the type specified by the <code><a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Capture.html#t:Capture">Capture</a></code>.
 This lets servant worry about getting it from the URL and turning
 it into a value of the type you specify.</p><p>You can control how it'll be converted from <code>Text</code> to your type
 by simply providing an instance of <code>FromHttpApiData</code> for your type.</p><p>Example:</p><pre>type MyApi = &quot;books&quot; :&gt; Capture &quot;isbn&quot; Text :&gt; Get '[JSON] Book

server :: Server MyApi
server = getBook
  where getBook :: Text -&gt; ExceptT ServantErr IO Book
        getBook isbn = ...</pre></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href=""/>KnownSymbol</a> path, <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> k sublayout) =&gt; <a href="Servant-Server-Internal.html#t:HasServer">HasServer</a> * (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Sub.html#t::-62-">(:&gt;)</a> <a href=""/>Symbol</a> k path sublayout)</span></td><td class="doc"><p>Make sure the incoming request starts with <code>&quot;/path&quot;</code>, strip it and
 pass the rest of the request path to <code>sublayout</code>.</p></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Server" class="def">Server</a> layout = <a href="Servant-Server-Internal.html#t:ServerT">ServerT</a> layout (<a href=""/>ExceptT</a> <a href="Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a>)</p></div><h1 id="g:1">Instances</h1><div class="top"><p class="src"><a name="v:captured" class="def">captured</a> :: FromHttpApiData a =&gt; proxy (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-Capture.html#t:Capture">Capture</a> sym a) -&gt; Text -&gt; <a href=""/>Maybe</a> a</p></div><div class="top"><p class="src"><a name="v:allowedMethodHead" class="def">allowedMethodHead</a> :: Method -&gt; Request -&gt; <a href=""/>Bool</a></p></div><div class="top"><p class="src"><a name="v:allowedMethod" class="def">allowedMethod</a> :: Method -&gt; Request -&gt; <a href=""/>Bool</a></p></div><div class="top"><p class="src"><a name="v:processMethodRouter" class="def">processMethodRouter</a> :: <span class="keyword">forall</span> a. ConvertibleStrings a <a href=""/>ByteString</a> =&gt; <a href=""/>Maybe</a> (a, <a href=""/>ByteString</a>) -&gt; Status -&gt; Method -&gt; <a href=""/>Maybe</a> [(HeaderName, <a href=""/>ByteString</a>)] -&gt; Request -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:RouteResult">RouteResult</a> Response</p></div><div class="top"><p class="src"><a name="v:methodCheck" class="def">methodCheck</a> :: Method -&gt; Request -&gt; <a href=""/>IO</a> (<a href="Servant-Server-Internal-RoutingApplication.html#t:RouteResult">RouteResult</a> ())</p></div><div class="top"><p class="src"><a name="v:acceptCheck" class="def">acceptCheck</a> :: <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllMime">AllMime</a> list =&gt; <a href="Servant.html#t:Proxy">Proxy</a> list -&gt; <a href=""/>ByteString</a> -&gt; <a href=""/>IO</a> (<a href="Servant-Server-Internal-RoutingApplication.html#t:RouteResult">RouteResult</a> ())</p></div><div class="top"><p class="src"><a name="v:methodRouter" class="def">methodRouter</a> :: <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes a =&gt; Method -&gt; <a href="Servant.html#t:Proxy">Proxy</a> ctypes -&gt; Status -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:Delayed">Delayed</a> (<a href=""/>ExceptT</a> <a href="Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a> a) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></p></div><div class="top"><p class="src"><a name="v:methodRouterHeaders" class="def">methodRouterHeaders</a> :: (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:GetHeaders">GetHeaders</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v), <a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ContentTypes.html#t:AllCTRender">AllCTRender</a> ctypes v) =&gt; Method -&gt; <a href="Servant.html#t:Proxy">Proxy</a> ctypes -&gt; Status -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:Delayed">Delayed</a> (<a href=""/>ExceptT</a> <a href="Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a> (<a href="/thentos/gh-pages/haddock/doc/x86_64-linux-ghc-7.10.2/servant-0.5/html/Servant-API-ResponseHeaders.html#t:Headers">Headers</a> h v)) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></p></div><div class="top"><p class="src"><a name="v:methodRouterEmpty" class="def">methodRouterEmpty</a> :: Method -&gt; <a href="Servant-Server-Internal-RoutingApplication.html#t:Delayed">Delayed</a> (<a href=""/>ExceptT</a> <a href="Servant-Server-Internal-ServantErr.html#t:ServantErr">ServantErr</a> <a href=""/>IO</a> ()) -&gt; <a href="Servant-Server-Internal-Router.html#t:Router">Router</a></p></div><div class="top"><p class="src"><a name="v:pathIsEmpty" class="def">pathIsEmpty</a> :: Request -&gt; <a href=""/>Bool</a></p></div><div class="top"><p class="src"><a name="v:ct_wildcard" class="def">ct_wildcard</a> :: <a href=""/>ByteString</a></p></div><div class="top"><p class="src">module <a href="Servant-Server-Internal-Router.html">Servant.Server.Internal.Router</a></p></div><div class="top"><p class="src">module <a href="Servant-Server-Internal-RoutingApplication.html">Servant.Server.Internal.RoutingApplication</a></p></div><div class="top"><p class="src">module <a href="Servant-Server-Internal-ServantErr.html">Servant.Server.Internal.ServantErr</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>