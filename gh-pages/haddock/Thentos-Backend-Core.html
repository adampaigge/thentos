<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Thentos.Backend.Core</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Thentos-Backend-Core.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">thentos-0.0.1: Privacy-preserving identity management on the web</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Thentos.Backend.Core</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:RestAction">RestAction</a> = <a href="Thentos-Api.html#t:Action">Action</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Concurrent-MVar.html#t:MVar">MVar</a> SystemRNG)</li><li class="src short"><span class="keyword">type</span> <a href="#t:RestActionState">RestActionState</a> = <a href="Thentos-Api.html#t:ActionState">ActionState</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Concurrent-MVar.html#t:MVar">MVar</a> SystemRNG)</li><li class="src short"><span class="keyword">type</span> <a href="#t:RestActionRaw">RestActionRaw</a> = EitherT <a href="Thentos-Backend-Core.html#t:RestError">RestError</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/System-IO.html#t:IO">IO</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:RestError">RestError</a> = (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Int.html#t:Int">Int</a>, <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-String.html#t:String">String</a>)</li><li class="src short"><a href="#v:lookupRequestHeader">lookupRequestHeader</a> :: Request -&gt; CI SBS -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> ST</li><li class="src short"><span class="keyword">class</span> <a href="#t:PushActionC">PushActionC</a> a <span class="keyword">where</span><ul class="subs"><li><span class="keyword">type</span> <a href="#t:PushActionSubRoute">PushActionSubRoute</a> a</li><li><a href="#v:pushAction">pushAction</a> :: <a href="Thentos-Backend-Core.html#t:RestActionState">RestActionState</a> -&gt; <a href="Thentos-Backend-Core.html#t:PushActionSubRoute">PushActionSubRoute</a> a -&gt; a</li></ul></li><li class="src short"><a href="#v:fmapLTM">fmapLTM</a> :: (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Monad.html#t:Functor">Functor</a> m) =&gt; (a -&gt; m a') -&gt; EitherT a m b -&gt; EitherT a' m b</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:RestAction" class="def">RestAction</a> = <a href="Thentos-Api.html#t:Action">Action</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Concurrent-MVar.html#t:MVar">MVar</a> SystemRNG)</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:RestActionState" class="def">RestActionState</a> = <a href="Thentos-Api.html#t:ActionState">ActionState</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Concurrent-MVar.html#t:MVar">MVar</a> SystemRNG)</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:RestActionRaw" class="def">RestActionRaw</a> = EitherT <a href="Thentos-Backend-Core.html#t:RestError">RestError</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/System-IO.html#t:IO">IO</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:RestError" class="def">RestError</a> = (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Int.html#t:Int">Int</a>, <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-String.html#t:String">String</a>)</p></div><div class="top"><p class="src"><a name="v:lookupRequestHeader" class="def">lookupRequestHeader</a> :: Request -&gt; CI SBS -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> ST</p></div><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:PushActionC" class="def">PushActionC</a> a <span class="keyword">where</span></p><div class="doc"><p>This is a work-around: The <code>Server</code> type family terminates in
 <code><a href="Thentos-Backend-Core.html#t:RestActionRaw">RestActionRaw</a></code> on all methods.  <code><a href="Thentos-Backend-Core.html#t:PushActionC">PushActionC</a></code> instances transform
 handlers implemented in a monad stack we want (providing acid
 state, clearance info, random generator, ... in a reader) into the
 handlers in <code><a href="Thentos-Backend-Core.html#t:RestActionRaw">RestActionRaw</a></code>.  (Also, translate <code>DbError</code> to
 <code><a href="Thentos-Backend-Core.html#t:RestError">RestError</a></code>.)</p></div><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a name="t:PushActionSubRoute" class="def">PushActionSubRoute</a> a</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:pushAction" class="def">pushAction</a> :: <a href="Thentos-Backend-Core.html#t:RestActionState">RestActionState</a> -&gt; <a href="Thentos-Backend-Core.html#t:PushActionSubRoute">PushActionSubRoute</a> a -&gt; a</p></div><div class="subs instances"><p id="control.i:PushActionC" class="caption collapser" onclick="toggleSection('i:PushActionC')">Instances</p><div id="section.i:PushActionC" class="show"><table><tr><td class="src"><a href="Thentos-Backend-Core.html#t:PushActionC">PushActionC</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/System-IO.html#t:IO">IO</a> ResponseReceived)</td><td class="doc"><p>For handling <code>Raw</code>.  (The <code>Application</code> type has been stripped of
 its arguments by the time the compiler will find this instance.)</p><p>FIXME: in order to do error handling here, which would be nice, we
 would have to instantiate <code>((Response -&gt; IO ResponseReceived) -&gt; IO
 ResponseReceived)</code>, which conflicts with the <code>a -&gt; b</code> instance
 above.  a solution for this is to wrap <code>Application</code> in <code>Raw</code> into
 a transparent newtype that can be instantiated here instead of the
 function type.  for now, just crash in case of errors.</p></td></tr><tr><td class="src"><a href="Thentos-Backend-Core.html#t:PushActionC">PushActionC</a> (<a href="Thentos-Backend-Core.html#t:RestActionRaw">RestActionRaw</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Thentos-Backend-Core.html#t:PushActionC">PushActionC</a> b =&gt; <a href="Thentos-Backend-Core.html#t:PushActionC">PushActionC</a> (a -&gt; b)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Thentos-Backend-Core.html#t:PushActionC">PushActionC</a> a, <a href="Thentos-Backend-Core.html#t:PushActionC">PushActionC</a> b) =&gt; <a href="Thentos-Backend-Core.html#t:PushActionC">PushActionC</a> ((:&lt;|&gt;) a b)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:fmapLTM" class="def">fmapLTM</a> :: (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Monad.html#t:Functor">Functor</a> m) =&gt; (a -&gt; m a') -&gt; EitherT a m b -&gt; EitherT a' m b</p><div class="doc"><p>Like <code>fmapLT</code> from <a href="Data-EitherR.html">Data.EitherR</a>, but with the update of the
 left value constructed in an impure action.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>