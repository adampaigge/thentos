<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Thentos.DB.Trans</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Thentos-DB-Trans.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">thentos-0.0.1: The swiss army knife of privacy-preserving identity management</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Thentos.DB.Trans</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span> <a href="#t:AllUserIds">AllUserIds</a> = <a href="#v:AllUserIds">AllUserIds</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_allUserIds">trans_allUserIds</a> :: <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> [<a href="Thentos-Types.html#t:UserId">UserId</a>]</li><li class="src short"><span class="keyword">data</span> <a href="#t:LookupUser">LookupUser</a> = <a href="#v:LookupUser">LookupUser</a> <a href="Thentos-Types.html#t:UserId">UserId</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_lookupUser">trans_lookupUser</a> :: <a href="Thentos-Types.html#t:UserId">UserId</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:LookupUserByName">LookupUserByName</a> = <a href="#v:LookupUserByName">LookupUserByName</a> <a href="Thentos-Types.html#t:UserName">UserName</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_lookupUserByName">trans_lookupUserByName</a> :: <a href="Thentos-Types.html#t:UserName">UserName</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:LookupUserByEmail">LookupUserByEmail</a> = <a href="#v:LookupUserByEmail">LookupUserByEmail</a> <a href="Thentos-Types.html#t:UserEmail">UserEmail</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_lookupUserByEmail">trans_lookupUserByEmail</a> :: <a href="Thentos-Types.html#t:UserEmail">UserEmail</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:AddUser">AddUser</a> = <a href="#v:AddUser">AddUser</a> <a href="Thentos-Types.html#t:User">User</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_addUser">trans_addUser</a> :: <a href="Thentos-Types.html#t:User">User</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> <a href="Thentos-Types.html#t:UserId">UserId</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:AddUnconfirmedUser">AddUnconfirmedUser</a> = <a href="#v:AddUnconfirmedUser">AddUnconfirmedUser</a> <a href="Thentos-Types.html#t:ConfirmationToken">ConfirmationToken</a> <a href="Thentos-Types.html#t:User">User</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_addUnconfirmedUser">trans_addUnconfirmedUser</a> :: <a href="Thentos-Types.html#t:ConfirmationToken">ConfirmationToken</a> -&gt; <a href="Thentos-Types.html#t:User">User</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:ConfirmationToken">ConfirmationToken</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:FinishUserRegistration">FinishUserRegistration</a> = <a href="#v:FinishUserRegistration">FinishUserRegistration</a> <a href="Thentos-Types.html#t:ConfirmationToken">ConfirmationToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_finishUserRegistration">trans_finishUserRegistration</a> :: <a href="Thentos-Types.html#t:ConfirmationToken">ConfirmationToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> <a href="Thentos-Types.html#t:UserId">UserId</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:AddUsers">AddUsers</a> = <a href="#v:AddUsers">AddUsers</a> [<a href="Thentos-Types.html#t:User">User</a>] <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_addUsers">trans_addUsers</a> :: [<a href="Thentos-Types.html#t:User">User</a>] -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> [<a href="Thentos-Types.html#t:UserId">UserId</a>]</li><li class="src short"><span class="keyword">data</span> <a href="#t:UpdateUser">UpdateUser</a> = <a href="#v:UpdateUser">UpdateUser</a> <a href="Thentos-Types.html#t:UserId">UserId</a> <a href="Thentos-Types.html#t:User">User</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_updateUser">trans_updateUser</a> :: <a href="Thentos-Types.html#t:UserId">UserId</a> -&gt; <a href="Thentos-Types.html#t:User">User</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:UpdateUserField">UpdateUserField</a> = <a href="#v:UpdateUserField">UpdateUserField</a> <a href="Thentos-Types.html#t:UserId">UserId</a> <a href="Thentos-DB-Trans.html#t:UpdateUserFieldOp">UpdateUserFieldOp</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_updateUserField">trans_updateUserField</a> :: <a href="Thentos-Types.html#t:UserId">UserId</a> -&gt; <a href="Thentos-DB-Trans.html#t:UpdateUserFieldOp">UpdateUserFieldOp</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:UpdateUserFieldOp">UpdateUserFieldOp</a><ul class="subs"><li>= <a href="#v:UpdateUserFieldName">UpdateUserFieldName</a> <a href="Thentos-Types.html#t:UserName">UserName</a></li><li>| <a href="#v:UpdateUserFieldEmail">UpdateUserFieldEmail</a> <a href="Thentos-Types.html#t:UserEmail">UserEmail</a></li><li>| <a href="#v:UpdateUserFieldAddService">UpdateUserFieldAddService</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a></li><li>| <a href="#v:UpdateUserFieldDropService">UpdateUserFieldDropService</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:DeleteUser">DeleteUser</a> = <a href="#v:DeleteUser">DeleteUser</a> <a href="Thentos-Types.html#t:UserId">UserId</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_deleteUser">trans_deleteUser</a> :: <a href="Thentos-Types.html#t:UserId">UserId</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:AllServiceIds">AllServiceIds</a> = <a href="#v:AllServiceIds">AllServiceIds</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_allServiceIds">trans_allServiceIds</a> :: <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> [<a href="Thentos-Types.html#t:ServiceId">ServiceId</a>]</li><li class="src short"><span class="keyword">data</span> <a href="#t:LookupService">LookupService</a> = <a href="#v:LookupService">LookupService</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_lookupService">trans_lookupService</a> :: <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> (<a href="Thentos-Types.html#t:ServiceId">ServiceId</a>, <a href="Thentos-Types.html#t:Service">Service</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:AddService">AddService</a> = <a href="#v:AddService">AddService</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> (<a href="Thentos-Types.html#t:HashedSecret">HashedSecret</a> <a href="Thentos-Types.html#t:ServiceKey">ServiceKey</a>) <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_addService">trans_addService</a> :: <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> -&gt; <a href="Thentos-Types.html#t:HashedSecret">HashedSecret</a> <a href="Thentos-Types.html#t:ServiceKey">ServiceKey</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:DeleteService">DeleteService</a> = <a href="#v:DeleteService">DeleteService</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_deleteService">trans_deleteService</a> :: <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:AllSessionTokens">AllSessionTokens</a> = <a href="#v:AllSessionTokens">AllSessionTokens</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_allSessionTokens">trans_allSessionTokens</a> :: <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> [<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>]</li><li class="src short"><span class="keyword">data</span> <a href="#t:LookupSessionQ">LookupSessionQ</a> = <a href="#v:LookupSessionQ">LookupSessionQ</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a>) <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_lookupSessionQ">trans_lookupSessionQ</a> :: <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> (<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>, <a href="Thentos-Types.html#t:Session">Session</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:LookupSession">LookupSession</a> = <a href="#v:LookupSession">LookupSession</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a>, <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a>)) <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_lookupSession">trans_lookupSession</a> :: <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a>, <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> (<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>, <a href="Thentos-Types.html#t:Session">Session</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:StartSession">StartSession</a> = <a href="#v:StartSession">StartSession</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:Agent">Agent</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> <a href="Thentos-Types.html#t:Timeout">Timeout</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_startSession">trans_startSession</a> :: <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-Types.html#t:Agent">Agent</a> -&gt; <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> -&gt; <a href="Thentos-Types.html#t:Timeout">Timeout</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:EndSession">EndSession</a> = <a href="#v:EndSession">EndSession</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_endSession">trans_endSession</a> :: <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:IsActiveSession">IsActiveSession</a> = <a href="#v:IsActiveSession">IsActiveSession</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_isActiveSession">trans_isActiveSession</a> :: <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:IsActiveSessionAndBump">IsActiveSessionAndBump</a> = <a href="#v:IsActiveSessionAndBump">IsActiveSessionAndBump</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_isActiveSessionAndBump">trans_isActiveSessionAndBump</a> :: <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:IsLoggedIntoService">IsLoggedIntoService</a> = <a href="#v:IsLoggedIntoService">IsLoggedIntoService</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_isLoggedIntoService">trans_isLoggedIntoService</a> :: <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:GarbageCollectSessions">GarbageCollectSessions</a> = <a href="#v:GarbageCollectSessions">GarbageCollectSessions</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_garbageCollectSessions">trans_garbageCollectSessions</a> :: <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> [<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>]</li><li class="src short"><span class="keyword">data</span> <a href="#t:AssignRole">AssignRole</a> = <a href="#v:AssignRole">AssignRole</a> <a href="Thentos-Types.html#t:Agent">Agent</a> <a href="Thentos-Types.html#t:Role">Role</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_assignRole">trans_assignRole</a> :: <a href="Thentos-Types.html#t:Agent">Agent</a> -&gt; <a href="Thentos-Types.html#t:Role">Role</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:UnassignRole">UnassignRole</a> = <a href="#v:UnassignRole">UnassignRole</a> <a href="Thentos-Types.html#t:Agent">Agent</a> <a href="Thentos-Types.html#t:Role">Role</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_unassignRole">trans_unassignRole</a> :: <a href="Thentos-Types.html#t:Agent">Agent</a> -&gt; <a href="Thentos-Types.html#t:Role">Role</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:LookupAgentRoles">LookupAgentRoles</a> = <a href="#v:LookupAgentRoles">LookupAgentRoles</a> <a href="Thentos-Types.html#t:Agent">Agent</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_lookupAgentRoles">trans_lookupAgentRoles</a> :: <a href="Thentos-Types.html#t:Agent">Agent</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> [<a href="Thentos-Types.html#t:Role">Role</a>]</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:SnapShot">SnapShot</a> = <a href="#v:SnapShot">SnapShot</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></li><li class="src short"><a href="#v:trans_snapShot">trans_snapShot</a> :: <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> <a href="Thentos-Types.html#t:DB">DB</a></li><li class="src short"><a href="#v:pure_lookupUser">pure_lookupUser</a> :: <a href="Thentos-Types.html#t:DB">DB</a> -&gt; <a href="Thentos-Types.html#t:UserId">UserId</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</li><li class="src short"><a href="#v:pure_lookupUserByName">pure_lookupUserByName</a> :: <a href="Thentos-Types.html#t:DB">DB</a> -&gt; <a href="Thentos-Types.html#t:UserName">UserName</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</li><li class="src short"><a href="#v:pure_lookupService">pure_lookupService</a> :: <a href="Thentos-Types.html#t:DB">DB</a> -&gt; <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:ServiceId">ServiceId</a>, <a href="Thentos-Types.html#t:Service">Service</a>)</li><li class="src short"><a href="#v:pure_lookupSession">pure_lookupSession</a> :: <a href="Thentos-Types.html#t:DB">DB</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a>, <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Trans.html#t:LookupSessionResult">LookupSessionResult</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:LookupSessionResult">LookupSessionResult</a><ul class="subs"><li>= <a href="#v:LookupSessionUnchanged">LookupSessionUnchanged</a> (<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>, <a href="Thentos-Types.html#t:Session">Session</a>)</li><li>| <a href="#v:LookupSessionBumped">LookupSessionBumped</a> (<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>, <a href="Thentos-Types.html#t:Session">Session</a>)</li><li>| <a href="#v:LookupSessionNotThere">LookupSessionNotThere</a></li><li>| <a href="#v:LookupSessionInactive">LookupSessionInactive</a></li></ul></li><li class="src short"><a href="#v:pure_lookupAgentRoles">pure_lookupAgentRoles</a> :: <a href="Thentos-Types.html#t:DB">DB</a> -&gt; <a href="Thentos-Types.html#t:Agent">Agent</a> -&gt; [<a href="Thentos-Types.html#t:Role">Role</a>]</li><li class="src short"><a href="#v:emptyDB">emptyDB</a> :: <a href="Thentos-Types.html#t:DB">DB</a></li><li class="src short"><a href="#v:createCheckpointLoop">createCheckpointLoop</a> ::  AcidState st -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/System-IO.html#t:IO">IO</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Concurrent.html#t:ThreadId">ThreadId</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:AllUserIds" class="def">AllUserIds</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:AllUserIds" class="def">AllUserIds</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AllUserIds" class="caption collapser" onclick="toggleSection('i:AllUserIds')">Instances</p><div id="section.i:AllUserIds" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:AllUserIds">AllUserIds</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:AllUserIds">AllUserIds</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:AllUserIds">AllUserIds</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:AllUserIds">AllUserIds</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:AllUserIds">AllUserIds</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:AllUserIds">AllUserIds</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> [<a href="Thentos-Types.html#t:UserId">UserId</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_allUserIds" class="def">trans_allUserIds</a> :: <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> [<a href="Thentos-Types.html#t:UserId">UserId</a>]</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:LookupUser" class="def">LookupUser</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:LookupUser" class="def">LookupUser</a> <a href="Thentos-Types.html#t:UserId">UserId</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:LookupUser" class="caption collapser" onclick="toggleSection('i:LookupUser')">Instances</p><div id="section.i:LookupUser" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:LookupUser">LookupUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:LookupUser">LookupUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:LookupUser">LookupUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:LookupUser">LookupUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:LookupUser">LookupUser</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:LookupUser">LookupUser</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_lookupUser" class="def">trans_lookupUser</a> :: <a href="Thentos-Types.html#t:UserId">UserId</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:LookupUserByName" class="def">LookupUserByName</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:LookupUserByName" class="def">LookupUserByName</a> <a href="Thentos-Types.html#t:UserName">UserName</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:LookupUserByName" class="caption collapser" onclick="toggleSection('i:LookupUserByName')">Instances</p><div id="section.i:LookupUserByName" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:LookupUserByName">LookupUserByName</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:LookupUserByName">LookupUserByName</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:LookupUserByName">LookupUserByName</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:LookupUserByName">LookupUserByName</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:LookupUserByName">LookupUserByName</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:LookupUserByName">LookupUserByName</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_lookupUserByName" class="def">trans_lookupUserByName</a> :: <a href="Thentos-Types.html#t:UserName">UserName</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:LookupUserByEmail" class="def">LookupUserByEmail</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:LookupUserByEmail" class="def">LookupUserByEmail</a> <a href="Thentos-Types.html#t:UserEmail">UserEmail</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:LookupUserByEmail" class="caption collapser" onclick="toggleSection('i:LookupUserByEmail')">Instances</p><div id="section.i:LookupUserByEmail" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:LookupUserByEmail">LookupUserByEmail</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:LookupUserByEmail">LookupUserByEmail</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:LookupUserByEmail">LookupUserByEmail</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:LookupUserByEmail">LookupUserByEmail</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:LookupUserByEmail">LookupUserByEmail</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:LookupUserByEmail">LookupUserByEmail</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_lookupUserByEmail" class="def">trans_lookupUserByEmail</a> :: <a href="Thentos-Types.html#t:UserEmail">UserEmail</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:AddUser" class="def">AddUser</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:AddUser" class="def">AddUser</a> <a href="Thentos-Types.html#t:User">User</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AddUser" class="caption collapser" onclick="toggleSection('i:AddUser')">Instances</p><div id="section.i:AddUser" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:AddUser">AddUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:AddUser">AddUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:AddUser">AddUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:AddUser">AddUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:AddUser">AddUser</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:AddUser">AddUser</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> <a href="Thentos-Types.html#t:UserId">UserId</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_addUser" class="def">trans_addUser</a> :: <a href="Thentos-Types.html#t:User">User</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> <a href="Thentos-Types.html#t:UserId">UserId</a></p><div class="doc"><p>Write new user to DB.  Return the fresh user id.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:AddUnconfirmedUser" class="def">AddUnconfirmedUser</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:AddUnconfirmedUser" class="def">AddUnconfirmedUser</a> <a href="Thentos-Types.html#t:ConfirmationToken">ConfirmationToken</a> <a href="Thentos-Types.html#t:User">User</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AddUnconfirmedUser" class="caption collapser" onclick="toggleSection('i:AddUnconfirmedUser')">Instances</p><div id="section.i:AddUnconfirmedUser" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:AddUnconfirmedUser">AddUnconfirmedUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:AddUnconfirmedUser">AddUnconfirmedUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:AddUnconfirmedUser">AddUnconfirmedUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:AddUnconfirmedUser">AddUnconfirmedUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:AddUnconfirmedUser">AddUnconfirmedUser</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:AddUnconfirmedUser">AddUnconfirmedUser</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:ConfirmationToken">ConfirmationToken</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_addUnconfirmedUser" class="def">trans_addUnconfirmedUser</a> :: <a href="Thentos-Types.html#t:ConfirmationToken">ConfirmationToken</a> -&gt; <a href="Thentos-Types.html#t:User">User</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:ConfirmationToken">ConfirmationToken</a>)</p><div class="doc"><p>Write a new unconfirmed user (i.e. one whose email address we haven't
 confirmed yet) to DB. Unlike addUser, this operation does not ensure
 uniqueness of email adresses.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:FinishUserRegistration" class="def">FinishUserRegistration</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:FinishUserRegistration" class="def">FinishUserRegistration</a> <a href="Thentos-Types.html#t:ConfirmationToken">ConfirmationToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:FinishUserRegistration" class="caption collapser" onclick="toggleSection('i:FinishUserRegistration')">Instances</p><div id="section.i:FinishUserRegistration" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:FinishUserRegistration">FinishUserRegistration</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:FinishUserRegistration">FinishUserRegistration</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:FinishUserRegistration">FinishUserRegistration</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:FinishUserRegistration">FinishUserRegistration</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:FinishUserRegistration">FinishUserRegistration</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:FinishUserRegistration">FinishUserRegistration</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> <a href="Thentos-Types.html#t:UserId">UserId</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_finishUserRegistration" class="def">trans_finishUserRegistration</a> :: <a href="Thentos-Types.html#t:ConfirmationToken">ConfirmationToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> <a href="Thentos-Types.html#t:UserId">UserId</a></p><div class="doc"><p>Note on the label for this transaction: If somebody has the
 confirmation token, we assume that she is authenticated.  Since
 <code>makeThentosClearance</code> does not check for confirmation tokens, this
 transaction is publicly accessible.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:AddUsers" class="def">AddUsers</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:AddUsers" class="def">AddUsers</a> [<a href="Thentos-Types.html#t:User">User</a>] <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AddUsers" class="caption collapser" onclick="toggleSection('i:AddUsers')">Instances</p><div id="section.i:AddUsers" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:AddUsers">AddUsers</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:AddUsers">AddUsers</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:AddUsers">AddUsers</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:AddUsers">AddUsers</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:AddUsers">AddUsers</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:AddUsers">AddUsers</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> [<a href="Thentos-Types.html#t:UserId">UserId</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_addUsers" class="def">trans_addUsers</a> :: [<a href="Thentos-Types.html#t:User">User</a>] -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> [<a href="Thentos-Types.html#t:UserId">UserId</a>]</p><div class="doc"><p>Write a list of new users to DB.  Return list of fresh user ids.
 This is not the most vital part of the backend API, but it allows
 for testing rollback in error cases.  It will also be a nice
 example for intersecting authorizations.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:UpdateUser" class="def">UpdateUser</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:UpdateUser" class="def">UpdateUser</a> <a href="Thentos-Types.html#t:UserId">UserId</a> <a href="Thentos-Types.html#t:User">User</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:UpdateUser" class="caption collapser" onclick="toggleSection('i:UpdateUser')">Instances</p><div id="section.i:UpdateUser" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:UpdateUser">UpdateUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:UpdateUser">UpdateUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:UpdateUser">UpdateUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:UpdateUser">UpdateUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:UpdateUser">UpdateUser</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:UpdateUser">UpdateUser</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_updateUser" class="def">trans_updateUser</a> :: <a href="Thentos-Types.html#t:UserId">UserId</a> -&gt; <a href="Thentos-Types.html#t:User">User</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</p><div class="doc"><p>Update existing user in DB.  Throw an error if user id does not
 exist, or if email address in updated user is already in use by
 another user.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:UpdateUserField" class="def">UpdateUserField</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:UpdateUserField" class="def">UpdateUserField</a> <a href="Thentos-Types.html#t:UserId">UserId</a> <a href="Thentos-DB-Trans.html#t:UpdateUserFieldOp">UpdateUserFieldOp</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:UpdateUserField" class="caption collapser" onclick="toggleSection('i:UpdateUserField')">Instances</p><div id="section.i:UpdateUserField" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:UpdateUserField">UpdateUserField</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:UpdateUserField">UpdateUserField</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:UpdateUserField">UpdateUserField</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:UpdateUserField">UpdateUserField</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:UpdateUserField">UpdateUserField</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:UpdateUserField">UpdateUserField</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_updateUserField" class="def">trans_updateUserField</a> :: <a href="Thentos-Types.html#t:UserId">UserId</a> -&gt; <a href="Thentos-DB-Trans.html#t:UpdateUserFieldOp">UpdateUserFieldOp</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:UpdateUserFieldOp" class="def">UpdateUserFieldOp</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:UpdateUserFieldName" class="def">UpdateUserFieldName</a> <a href="Thentos-Types.html#t:UserName">UserName</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:UpdateUserFieldEmail" class="def">UpdateUserFieldEmail</a> <a href="Thentos-Types.html#t:UserEmail">UserEmail</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:UpdateUserFieldAddService" class="def">UpdateUserFieldAddService</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:UpdateUserFieldDropService" class="def">UpdateUserFieldDropService</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:UpdateUserFieldOp" class="caption collapser" onclick="toggleSection('i:UpdateUserFieldOp')">Instances</p><div id="section.i:UpdateUserFieldOp" class="show"><table><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Eq.html#t:Eq">Eq</a> <a href="Thentos-DB-Trans.html#t:UpdateUserFieldOp">UpdateUserFieldOp</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Text-Show.html#t:Show">Show</a> <a href="Thentos-DB-Trans.html#t:UpdateUserFieldOp">UpdateUserFieldOp</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:UpdateUserFieldOp">UpdateUserFieldOp</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:DeleteUser" class="def">DeleteUser</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:DeleteUser" class="def">DeleteUser</a> <a href="Thentos-Types.html#t:UserId">UserId</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:DeleteUser" class="caption collapser" onclick="toggleSection('i:DeleteUser')">Instances</p><div id="section.i:DeleteUser" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:DeleteUser">DeleteUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:DeleteUser">DeleteUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:DeleteUser">DeleteUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:DeleteUser">DeleteUser</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:DeleteUser">DeleteUser</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:DeleteUser">DeleteUser</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_deleteUser" class="def">trans_deleteUser</a> :: <a href="Thentos-Types.html#t:UserId">UserId</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</p><div class="doc"><p>Delete user with given user id.  If user does not exist, throw an
 error.</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:AllServiceIds" class="def">AllServiceIds</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:AllServiceIds" class="def">AllServiceIds</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AllServiceIds" class="caption collapser" onclick="toggleSection('i:AllServiceIds')">Instances</p><div id="section.i:AllServiceIds" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:AllServiceIds">AllServiceIds</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:AllServiceIds">AllServiceIds</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:AllServiceIds">AllServiceIds</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:AllServiceIds">AllServiceIds</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:AllServiceIds">AllServiceIds</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:AllServiceIds">AllServiceIds</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> [<a href="Thentos-Types.html#t:ServiceId">ServiceId</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_allServiceIds" class="def">trans_allServiceIds</a> :: <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> [<a href="Thentos-Types.html#t:ServiceId">ServiceId</a>]</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:LookupService" class="def">LookupService</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:LookupService" class="def">LookupService</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:LookupService" class="caption collapser" onclick="toggleSection('i:LookupService')">Instances</p><div id="section.i:LookupService" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:LookupService">LookupService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:LookupService">LookupService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:LookupService">LookupService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:LookupService">LookupService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:LookupService">LookupService</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:LookupService">LookupService</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> (<a href="Thentos-Types.html#t:ServiceId">ServiceId</a>, <a href="Thentos-Types.html#t:Service">Service</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_lookupService" class="def">trans_lookupService</a> :: <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> (<a href="Thentos-Types.html#t:ServiceId">ServiceId</a>, <a href="Thentos-Types.html#t:Service">Service</a>)</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:AddService" class="def">AddService</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:AddService" class="def">AddService</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> (<a href="Thentos-Types.html#t:HashedSecret">HashedSecret</a> <a href="Thentos-Types.html#t:ServiceKey">ServiceKey</a>) <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AddService" class="caption collapser" onclick="toggleSection('i:AddService')">Instances</p><div id="section.i:AddService" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:AddService">AddService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:AddService">AddService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:AddService">AddService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:AddService">AddService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:AddService">AddService</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:AddService">AddService</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_addService" class="def">trans_addService</a> :: <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> -&gt; <a href="Thentos-Types.html#t:HashedSecret">HashedSecret</a> <a href="Thentos-Types.html#t:ServiceKey">ServiceKey</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</p><div class="doc"><p>Write new service to DB.  Service key is generated automatically.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:DeleteService" class="def">DeleteService</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:DeleteService" class="def">DeleteService</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:DeleteService" class="caption collapser" onclick="toggleSection('i:DeleteService')">Instances</p><div id="section.i:DeleteService" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:DeleteService">DeleteService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:DeleteService">DeleteService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:DeleteService">DeleteService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:DeleteService">DeleteService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:DeleteService">DeleteService</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:DeleteService">DeleteService</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_deleteService" class="def">trans_deleteService</a> :: <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</p></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:AllSessionTokens" class="def">AllSessionTokens</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:AllSessionTokens" class="def">AllSessionTokens</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AllSessionTokens" class="caption collapser" onclick="toggleSection('i:AllSessionTokens')">Instances</p><div id="section.i:AllSessionTokens" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:AllSessionTokens">AllSessionTokens</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:AllSessionTokens">AllSessionTokens</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:AllSessionTokens">AllSessionTokens</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:AllSessionTokens">AllSessionTokens</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:AllSessionTokens">AllSessionTokens</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:AllSessionTokens">AllSessionTokens</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> [<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_allSessionTokens" class="def">trans_allSessionTokens</a> :: <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> [<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>]</p><div class="doc"><p>Complete list of all active and inactive sessions.  This
 transaction may go away in the future unless we can think of a good
 use for it.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:LookupSessionQ" class="def">LookupSessionQ</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:LookupSessionQ" class="def">LookupSessionQ</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a>) <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:LookupSessionQ" class="caption collapser" onclick="toggleSection('i:LookupSessionQ')">Instances</p><div id="section.i:LookupSessionQ" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:LookupSessionQ">LookupSessionQ</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:LookupSessionQ">LookupSessionQ</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:LookupSessionQ">LookupSessionQ</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:LookupSessionQ">LookupSessionQ</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:LookupSessionQ">LookupSessionQ</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:LookupSessionQ">LookupSessionQ</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> (<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>, <a href="Thentos-Types.html#t:Session">Session</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_lookupSessionQ" class="def">trans_lookupSessionQ</a> :: <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> (<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>, <a href="Thentos-Types.html#t:Session">Session</a>)</p><div class="doc"><p>See <code><a href="Thentos-DB-Trans.html#v:trans_lookupSession">trans_lookupSession</a></code>.  The difference is that you cannot
 bump the session, so there cannot be any changes to the database,
 so the result monad can be <code><a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:LookupSession" class="def">LookupSession</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:LookupSession" class="def">LookupSession</a> (<a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a>, <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a>)) <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:LookupSession" class="caption collapser" onclick="toggleSection('i:LookupSession')">Instances</p><div id="section.i:LookupSession" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:LookupSession">LookupSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:LookupSession">LookupSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:LookupSession">LookupSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:LookupSession">LookupSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:LookupSession">LookupSession</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:LookupSession">LookupSession</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> (<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>, <a href="Thentos-Types.html#t:Session">Session</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_lookupSession" class="def">trans_lookupSession</a> :: <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a>, <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> (<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>, <a href="Thentos-Types.html#t:Session">Session</a>)</p><div class="doc"><p>Lookup session.  Use first arg to check if session is now active,
 and if not, remove it from database.  Use flag in second arg to
 update end-of-life <code><a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a></code> in result session and database.  If
 session does not exist, or if active check is enabled and session
 is inactive, throw <code><a href="Thentos-Types.html#v:NoSuchSession">NoSuchSession</a></code>.</p><p>Inactive sessions are not deleted.  See
 <code>trans_GarbageCollectSessions</code>.</p><p>See <code><a href="Thentos-DB-Trans.html#v:trans_lookupSessionQ">trans_lookupSessionQ</a></code> for a variant of this function in
 <code><a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:StartSession" class="def">StartSession</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:StartSession" class="def">StartSession</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:Agent">Agent</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> <a href="Thentos-Types.html#t:Timeout">Timeout</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:StartSession" class="caption collapser" onclick="toggleSection('i:StartSession')">Instances</p><div id="section.i:StartSession" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:StartSession">StartSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:StartSession">StartSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:StartSession">StartSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:StartSession">StartSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:StartSession">StartSession</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:StartSession">StartSession</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_startSession" class="def">trans_startSession</a> :: <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-Types.html#t:Agent">Agent</a> -&gt; <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> -&gt; <a href="Thentos-Types.html#t:Timeout">Timeout</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a></p><div class="doc"><p>Start a new session for user with <code><a href="Thentos-Types.html#t:UserId">UserId</a></code> on service with
 <code><a href="Thentos-Types.html#t:ServiceId">ServiceId</a></code>.  Start and end time have to be passed explicitly.
 Throw error if user or service do not exist.  Otherwise, return
 session token.  If there is already an active session for this
 user, return the existing token again, and store new session under
 it.  If agent is a user, remove all her logins (even if session
 already exists).</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:EndSession" class="def">EndSession</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:EndSession" class="def">EndSession</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:EndSession" class="caption collapser" onclick="toggleSection('i:EndSession')">Instances</p><div id="section.i:EndSession" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:EndSession">EndSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:EndSession">EndSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:EndSession">EndSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:EndSession">EndSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:EndSession">EndSession</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:EndSession">EndSession</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_endSession" class="def">trans_endSession</a> :: <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</p><div class="doc"><p>End session.  Call can be caused by logout request from user
 (before end of session life time), by session timeouts, or after
 its natural life time (by application's own garbage collection).
 If lookup of session owning user fails, throw an error.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:IsActiveSession" class="def">IsActiveSession</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:IsActiveSession" class="def">IsActiveSession</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:IsActiveSession" class="caption collapser" onclick="toggleSection('i:IsActiveSession')">Instances</p><div id="section.i:IsActiveSession" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:IsActiveSession">IsActiveSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:IsActiveSession">IsActiveSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:IsActiveSession">IsActiveSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:IsActiveSession">IsActiveSession</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:IsActiveSession">IsActiveSession</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:IsActiveSession">IsActiveSession</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_isActiveSession" class="def">trans_isActiveSession</a> :: <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a></p><div class="doc"><p>Is session token currently active?  (Do not bump either way.)
 Never throw errors; if session is inaccessible, simple return
 <code><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#v:False">False</a></code>.</p><p>Note on authorization: Since session tokens are as powerful as
 login credentials, this transaction is labelled <code><a href="Thentos-DB-Core.html#v:thentosPublic">thentosPublic</a></code>.
 (If we wanted to return <code><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#v:False">False</a></code> for both <code><a href="Thentos-Types.html#v:PermissionDenied">PermissionDenied</a></code> and
 <code><a href="Thentos-Types.html#v:NoSuchSession">NoSuchSession</a></code>, we would have to do that in <code>Action</code> rather than
 in <code><a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a></code>: <code><a href="Thentos-Types.html#v:PermissionDenied">PermissionDenied</a></code> errors can only be
 constructed from label <em>and</em> clearance, but inside <code><a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a></code>
 we have no clearance value.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:IsActiveSessionAndBump" class="def">IsActiveSessionAndBump</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:IsActiveSessionAndBump" class="def">IsActiveSessionAndBump</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:IsActiveSessionAndBump" class="caption collapser" onclick="toggleSection('i:IsActiveSessionAndBump')">Instances</p><div id="section.i:IsActiveSessionAndBump" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:IsActiveSessionAndBump">IsActiveSessionAndBump</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:IsActiveSessionAndBump">IsActiveSessionAndBump</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:IsActiveSessionAndBump">IsActiveSessionAndBump</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:IsActiveSessionAndBump">IsActiveSessionAndBump</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:IsActiveSessionAndBump">IsActiveSessionAndBump</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:IsActiveSessionAndBump">IsActiveSessionAndBump</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_isActiveSessionAndBump" class="def">trans_isActiveSessionAndBump</a> :: <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a></p><div class="doc"><p>Is session token currently active?  Bump if it is.  (See
 <code><a href="Thentos-DB-Trans.html#v:trans_isActiveSession">trans_isActiveSession</a></code>.)</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:IsLoggedIntoService" class="def">IsLoggedIntoService</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:IsLoggedIntoService" class="def">IsLoggedIntoService</a> <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:IsLoggedIntoService" class="caption collapser" onclick="toggleSection('i:IsLoggedIntoService')">Instances</p><div id="section.i:IsLoggedIntoService" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:IsLoggedIntoService">IsLoggedIntoService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:IsLoggedIntoService">IsLoggedIntoService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:IsLoggedIntoService">IsLoggedIntoService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:IsLoggedIntoService">IsLoggedIntoService</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:IsLoggedIntoService">IsLoggedIntoService</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:IsLoggedIntoService">IsLoggedIntoService</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_isLoggedIntoService" class="def">trans_isLoggedIntoService</a> :: <a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a> -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a></p><div class="doc"><p>Bump session if it is valid (even if not logged into service).</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:GarbageCollectSessions" class="def">GarbageCollectSessions</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:GarbageCollectSessions" class="def">GarbageCollectSessions</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:GarbageCollectSessions" class="caption collapser" onclick="toggleSection('i:GarbageCollectSessions')">Instances</p><div id="section.i:GarbageCollectSessions" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:GarbageCollectSessions">GarbageCollectSessions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:GarbageCollectSessions">GarbageCollectSessions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:GarbageCollectSessions">GarbageCollectSessions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:GarbageCollectSessions">GarbageCollectSessions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:GarbageCollectSessions">GarbageCollectSessions</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:GarbageCollectSessions">GarbageCollectSessions</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> [<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_garbageCollectSessions" class="def">trans_garbageCollectSessions</a> :: <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> [<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>]</p><div class="doc"><p>Go through <code><a href="Thentos-Types.html#v:dbSessions">dbSessions</a></code> map and find all expired sessions.
 Return in <code><a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a></code>.  (To reduce database locking, call this
 and then <code>EndSession</code> on all service ids individually.)</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:AssignRole" class="def">AssignRole</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:AssignRole" class="def">AssignRole</a> <a href="Thentos-Types.html#t:Agent">Agent</a> <a href="Thentos-Types.html#t:Role">Role</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AssignRole" class="caption collapser" onclick="toggleSection('i:AssignRole')">Instances</p><div id="section.i:AssignRole" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:AssignRole">AssignRole</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:AssignRole">AssignRole</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:AssignRole">AssignRole</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:AssignRole">AssignRole</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:AssignRole">AssignRole</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:AssignRole">AssignRole</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_assignRole" class="def">trans_assignRole</a> :: <a href="Thentos-Types.html#t:Agent">Agent</a> -&gt; <a href="Thentos-Types.html#t:Role">Role</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</p><div class="doc"><p>Extend <code><a href="Thentos-Types.html#t:Agent">Agent</a></code>s entry in <code><a href="Thentos-Types.html#v:dbRoles">dbRoles</a></code> with a new <code><a href="Thentos-Types.html#t:Role">Role</a></code>.  If <code><a href="Thentos-Types.html#t:Role">Role</a></code>
 is already assigned to <code><a href="Thentos-Types.html#t:Agent">Agent</a></code>, do nothing.  If Agent does not
 point to an existing entry in user or service table (or such),
 throw an error.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:UnassignRole" class="def">UnassignRole</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:UnassignRole" class="def">UnassignRole</a> <a href="Thentos-Types.html#t:Agent">Agent</a> <a href="Thentos-Types.html#t:Role">Role</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:UnassignRole" class="caption collapser" onclick="toggleSection('i:UnassignRole')">Instances</p><div id="section.i:UnassignRole" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:UnassignRole">UnassignRole</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">UpdateEvent <a href="Thentos-DB-Trans.html#t:UnassignRole">UnassignRole</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:UnassignRole">UnassignRole</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:UnassignRole">UnassignRole</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:UnassignRole">UnassignRole</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:UnassignRole">UnassignRole</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_unassignRole" class="def">trans_unassignRole</a> :: <a href="Thentos-Types.html#t:Agent">Agent</a> -&gt; <a href="Thentos-Types.html#t:Role">Role</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosUpdate">ThentosUpdate</a> ()</p><div class="doc"><p>Extend <code><a href="Thentos-Types.html#t:Agent">Agent</a></code>s entry in <code><a href="Thentos-Types.html#v:dbRoles">dbRoles</a></code> with a new <code><a href="Thentos-Types.html#t:Role">Role</a></code>.  If <code><a href="Thentos-Types.html#t:Role">Role</a></code>
 is not assigned to <code><a href="Thentos-Types.html#t:Agent">Agent</a></code>, do nothing.  If Agent does not
 point to an existing entry in user or service table (or such),
 throw an error.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:LookupAgentRoles" class="def">LookupAgentRoles</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:LookupAgentRoles" class="def">LookupAgentRoles</a> <a href="Thentos-Types.html#t:Agent">Agent</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:LookupAgentRoles" class="caption collapser" onclick="toggleSection('i:LookupAgentRoles')">Instances</p><div id="section.i:LookupAgentRoles" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:LookupAgentRoles">LookupAgentRoles</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:LookupAgentRoles">LookupAgentRoles</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:LookupAgentRoles">LookupAgentRoles</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:LookupAgentRoles">LookupAgentRoles</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:LookupAgentRoles">LookupAgentRoles</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:LookupAgentRoles">LookupAgentRoles</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> [<a href="Thentos-Types.html#t:Role">Role</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_lookupAgentRoles" class="def">trans_lookupAgentRoles</a> :: <a href="Thentos-Types.html#t:Agent">Agent</a> -&gt; <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> [<a href="Thentos-Types.html#t:Role">Role</a>]</p><div class="doc"><p>All <code><a href="Thentos-Types.html#t:Role">Role</a></code>s of an <code><a href="Thentos-Types.html#t:Agent">Agent</a></code>.  If <code><a href="Thentos-Types.html#t:Agent">Agent</a></code> does not exist or
 has no entry in <code><a href="Thentos-Types.html#v:dbRoles">dbRoles</a></code>, return an empty list.</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:SnapShot" class="def">SnapShot</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:SnapShot" class="def">SnapShot</a> <a href="Thentos-Types.html#t:ThentosClearance">ThentosClearance</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:SnapShot" class="caption collapser" onclick="toggleSection('i:SnapShot')">Instances</p><div id="section.i:SnapShot" class="show"><table><tr><td class="src">SafeCopy <a href="Thentos-DB-Trans.html#t:SnapShot">SnapShot</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">QueryEvent <a href="Thentos-DB-Trans.html#t:SnapShot">SnapShot</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Method <a href="Thentos-DB-Trans.html#t:SnapShot">SnapShot</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * <a href="Thentos-DB-Trans.html#t:SnapShot">SnapShot</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodState <a href="Thentos-DB-Trans.html#t:SnapShot">SnapShot</a> = <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">type</span> MethodResult <a href="Thentos-DB-Trans.html#t:SnapShot">SnapShot</a> = <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Either.html#t:Either">Either</a> <a href="Thentos-Types.html#t:ThentosError">ThentosError</a> <a href="Thentos-Types.html#t:DB">DB</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:trans_snapShot" class="def">trans_snapShot</a> :: <a href="Thentos-DB-Core.html#t:ThentosQuery">ThentosQuery</a> <a href="Thentos-Types.html#t:DB">DB</a></p></div><div class="top"><p class="src"><a name="v:pure_lookupUser" class="def">pure_lookupUser</a> :: <a href="Thentos-Types.html#t:DB">DB</a> -&gt; <a href="Thentos-Types.html#t:UserId">UserId</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</p></div><div class="top"><p class="src"><a name="v:pure_lookupUserByName" class="def">pure_lookupUserByName</a> :: <a href="Thentos-Types.html#t:DB">DB</a> -&gt; <a href="Thentos-Types.html#t:UserName">UserName</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:UserId">UserId</a>, <a href="Thentos-Types.html#t:User">User</a>)</p></div><div class="top"><p class="src"><a name="v:pure_lookupService" class="def">pure_lookupService</a> :: <a href="Thentos-Types.html#t:DB">DB</a> -&gt; <a href="Thentos-Types.html#t:ServiceId">ServiceId</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:ServiceId">ServiceId</a>, <a href="Thentos-Types.html#t:Service">Service</a>)</p></div><div class="top"><p class="src"><a name="v:pure_lookupSession" class="def">pure_lookupSession</a> :: <a href="Thentos-Types.html#t:DB">DB</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a>, <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Bool.html#t:Bool">Bool</a>) -&gt; <a href="Thentos-Types.html#t:SessionToken">SessionToken</a> -&gt; <a href="Thentos-DB-Trans.html#t:LookupSessionResult">LookupSessionResult</a></p><div class="doc"><p>Lookup session.  Use second arg to only return session if now
 active.  Use flag in second arg to update end-of-life <code><a href="Thentos-Types.html#t:TimeStamp">TimeStamp</a></code>
 in result session.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:LookupSessionResult" class="def">LookupSessionResult</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:LookupSessionUnchanged" class="def">LookupSessionUnchanged</a> (<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>, <a href="Thentos-Types.html#t:Session">Session</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:LookupSessionBumped" class="def">LookupSessionBumped</a> (<a href="Thentos-Types.html#t:SessionToken">SessionToken</a>, <a href="Thentos-Types.html#t:Session">Session</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:LookupSessionNotThere" class="def">LookupSessionNotThere</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:LookupSessionInactive" class="def">LookupSessionInactive</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:LookupSessionResult" class="caption collapser" onclick="toggleSection('i:LookupSessionResult')">Instances</p><div id="section.i:LookupSessionResult" class="show"><table><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Eq.html#t:Eq">Eq</a> <a href="Thentos-DB-Trans.html#t:LookupSessionResult">LookupSessionResult</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Ord.html#t:Ord">Ord</a> <a href="Thentos-DB-Trans.html#t:LookupSessionResult">LookupSessionResult</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Text-Read.html#t:Read">Read</a> <a href="Thentos-DB-Trans.html#t:LookupSessionResult">LookupSessionResult</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Text-Show.html#t:Show">Show</a> <a href="Thentos-DB-Trans.html#t:LookupSessionResult">LookupSessionResult</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:pure_lookupAgentRoles" class="def">pure_lookupAgentRoles</a> :: <a href="Thentos-Types.html#t:DB">DB</a> -&gt; <a href="Thentos-Types.html#t:Agent">Agent</a> -&gt; [<a href="Thentos-Types.html#t:Role">Role</a>]</p></div><div class="top"><p class="src"><a name="v:emptyDB" class="def">emptyDB</a> :: <a href="Thentos-Types.html#t:DB">DB</a></p></div><div class="top"><p class="src"><a name="v:createCheckpointLoop" class="def">createCheckpointLoop</a> ::  AcidState st -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/System-IO.html#t:IO">IO</a> <a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Control-Concurrent.html#t:ThreadId">ThreadId</a></p><div class="doc"><p>Create a new thread that calls <code>createCheckpoint</code> synchronously,
 then waits for <code>timeThreshold</code> miliseconds, then repeats.  If
 <code>sizeThreshold</code> is <code><a href="file:///mnt/slig-sda3/home/mf/opt/ghc/data/active/local/share/doc/ghc/html/libraries/base-4.7.0.2/Data-Maybe.html#v:Just">Just</a></code> a size, create checkpoint only if size of
 segment of current change log since last checkpoint is larger than
 that.</p><p>FIXME: check change log size.  (i think this is only possible
 inside acid-state.)  https:/<em>github.com</em>acid-state/acid-state.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>